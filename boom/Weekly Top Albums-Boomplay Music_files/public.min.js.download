/**
 * Project: WebPlayer
 * CreateDate: 2020-04-26 00时17分
 * Company: TRANSSION - TRANSSNET Music
 * @version 3.0.0
 * @author MingxingLuo or CalmLuo Email: 1281167683@qq.com
 */

var config={basePath:"",staticPath:"/pc/",staticAddr:"https://source.boomplaymusic.com/",shareBaseUrl:{song:"https://www.boomplay.com/songs/",bp:"https://www.boomplay.com/",embed:"https://www.boomplay.com/embed/"},constant:{bannerIntervalTime:5000,columnMaxLeft:25,maxCommentContent:500,maxLine:12,maxCommentHeight:16*5},msg:{download:"This feature is only available on Boomplay app.",noSong:"Please choose a song to play first.",deletePlaylists:"Do you want to delete this playlist?",deletePlaylistsSucc:"Success.",newPlaylistsSucc:"Success.",addToMyPlaylistsSucc:"Added",love:"Added to Favourites.",unlove:"Removed from Favourites.",favouritesNoSong:"No songs in your favorites. Go and find more music on Boomplay.",favouritesNoSongThisPage:"No songs in this page. Go and find more music on Boomplay.",discover:"Discover more music",searchEmpty:"Please input a search keyword.",commentContentTroppo:"The number of characters input must be less than 500.",loginLose:"Unsuccessful login attempts, please try again.",default_shareSong:"Looking for your favourite songs and videos? Get everything music from Boomplay.",default_shareCOl:"Looking for your favourite songs and videos? Get everything music from Boomplay.",default_shareBuzz:"Looking for your favourite buzz? Get everything music from Boomplay.",saveProfile:"Do you want to exit without saving?",notAvailable:"Sorry, the copyright owner has not made this available in this territory.",needSubscribe_song:"You need to subscribe to listen to this song.",needSubscribe_album:"You need to subscribe to listen to this album.",needSubscribe_playlist:"You need to subscribe to listen to this playlist.",playSong:{kickText:"Your account has been logged in via other devices, please log in to check if the account can be used.",autoLoginBtn:"Auto Login",autoLoginBtn_cancel:"I know",removeBtn:"Remove",removeBtn_cancel:"Cancel",removeText:". Do you want remove this song from playlist?"}},error:{network:"Network Error",phoneEmpty:"Please input your phone number.",phoneCorrect:"Your phone number seems to be invalid. Please check and re-input.",pwEmpty:"Please input your password.",pwCorrect:"Your password must be between 6-16 letters or numbers.",pwReEmpty:"Please input your password.",pwReCorrect:"The password did not match. Please check and try again.",codeEmpty:"Please input your verification code.",codeCorrect:"The Verification Code is incorrect. Please check and try again.",usernameEmpty:"Please input your name.",usernameCorrect:"用户名格式不对",genderEmpty:"Please select your gender.",acceptEmpty:"Please make sure you have agreed with the Terms and Conditions.",titleEmpty:"Please enter the title.",commentEmpty:"Please share your thoughts with others.",playlistEmpty:"You haven't added any music to playlist yet."},request:{shareCount:"/shareCount",page_404:"/error/404",page_500:"/error/500",source:"/getResourceAddr",log:"/uploadLog",batchUploadLogs:"/batchUploadLogs"},other:{facebookJS:"https://connect.facebook.net/en_US/sdk.js",snsLoginCallback:"https://www.boomplay.com/snsLoginCallback",snsLoginCallback_twitter:"https://www.boomplay.com/snsLoginCallback",facebookId:"1393952984244777",twitterId:"gfhg4f9uuvk97B2F7Cb26MYqh",googleId:"1013521840559-6mc0ouk685sp2gjj2rsb5n25d37c8enp.apps.googleusercontent.com"}};var lhx=$$=null;(function(e){String.prototype.lmx_addBodyParamBatch=function(l){var k=this;for(var j in l){var m=l[j];if(m||j==="dataVersion"||j==="pageIndex"){k+="&"+encodeURIComponent(j)+"="+encodeURIComponent(m)}}if(k.indexOf("&")===0){return k.substring(1)}return k};String.prototype.lmx_addBodyParam=function(j,k){return this.lmx_addBodyParamBatch({name:k})};String.prototype.lmx_addURLParamBatch=function(l){var j=this;j+=(j.indexOf("?")===-1?"?":"&");for(var k in l){j+=encodeURIComponent(k)+"="+encodeURIComponent(l[k])+"&"}return j.slice(0,-1)};String.prototype.lmx_addURLParam=function(j){return this.lmx_addURLParamBatch(j)};String.prototype.lmx_pathname=function(){return this.split("?")[0].replace(info.interfacePrefix,"")};String.prototype.lmx_parseToObjWithURL=function(){var o=this.split("?")[1];var m={};if(o){var p=o.split("&");for(var n=0,k=p.length;n<k;n++){var j=p[n];var l=j.split("=");m[l[0]]=decodeURIComponent(l[1])}}return m};String.prototype.lmx_clearHtml=function(){return this.replace(/<\/?(font|strong|span)([\s\S]*?)>/ig,"")};String.prototype.lmx_insert=function(j,k){return this.substring(0,j)+k+this.substring(j)};lhx={version:"3.0.0",versionControl:function(){var j=lhx.storageUtils.version_get();if(j!==this.version){lhx.storageUtils.clearAll().version_put()}},addZero:function(j){return j<10?("0"+j):j},formatMinuteSecond:function(j){if(isNaN(j)){return"00:00"}return this.addZero(Math.floor(j/60))+":"+this.addZero(Math.floor(j%60))},minuteSecondToTimestamp:function(k){if(!k){return 0}var j=k.split(":");return parseInt(j[0],10)*60+parseInt(j[1],10)},rand:function(k,j){return ~~((Math.random()*(j-k+1))+k)},hasCookie:function(){return navigator.cookieEnabled},openCenter:function(k,j){var m=(e.screen.availWidth-10-k)/2;var l=(e.screen.availHeight-30-j)/2-15;return"height="+j+", width="+k+", top="+l+", left="+m},removeZero:function(j,l){var k=j/l*10;k=Math.floor(k)/10;return k},getDateTimeWithTimestamp:function(k){var j=new Date(k);return j.getFullYear()+"-"+this.addZero(j.getMonth()+1)+"-"+this.addZero(j.getDate())+" "+this.addZero(j.getHours())+":"+this.addZero(j.getMinutes())},parseCount:function(j){if(!j){return 0}if(j<1000){return j}else{if(j<10000){return j.toString().lmx_insert(1,",")}else{if(j<1000000){return this.removeZero(j,1000)+"k"}else{if(j<1000000000){return this.removeZero(j,1000000)+"m"}else{return this.removeZero(j,1000000000)+"b"}}}}},faceObj:{"[0x1f601]":"emoji_1f601","[0x1f602]":"emoji_1f602","[0x1f604]":"emoji_1f604","[0x1f605]":"emoji_1f605","[0x1f606]":"emoji_1f606","[0x1f607]":"emoji_1f607","[0x1f609]":"emoji_1f609","[0x1f610]":"emoji_1f610","[0x1f611]":"emoji_1f611","[0x1f614]":"emoji_1f614","[0x1f615]":"emoji_1f615","[0x1f616]":"emoji_1f616","[0x1f618]":"emoji_1f618","[0x1f620]":"emoji_1f620","[0x1f624]":"emoji_1f624","[0x1f625]":"emoji_1f625","[0x1f626]":"emoji_1f626","[0x1f629]":"emoji_1f629","[0x1f631]":"emoji_1f631","[0x1f632]":"emoji_1f632","[0x1f633]":"emoji_1f633","[0x1f634]":"emoji_1f634","[0x1f637]":"emoji_1f637","[0x1f638]":"emoji_1f638","[0x1f640]":"emoji_1f640","[0x1f641]":"emoji_1f641","[0x1f642]":"emoji_1f642","[0x1f647]":"emoji_1f647","[0x1f654]":"emoji_1f654","[0x1f653]":"emoji_1f653","[0x1f652]":"emoji_1f652","[0x1f600]":"emoji_1f600","[0x1f603]":"emoji_1f603","[0x1f608]":"emoji_1f608","[0x1f612]":"emoji_1f612","[0x1f613]":"emoji_1f613","[0x1f617]":"emoji_1f617","[0x1f619]":"emoji_1f619","[0x1f621]":"emoji_1f621","[0x1f622]":"emoji_1f622","[0x1f623]":"emoji_1f623","[0x1f627]":"emoji_1f627","[0x1f628]":"emoji_1f628","[0x1f630]":"emoji_1f630","[0x1f635]":"emoji_1f635","[0x1f636]":"emoji_1f636","[0x1f60b]":"emoji_1f60b","[0x1f60c]":"emoji_1f60c","[0x1f60d]":"emoji_1f60d","[0x1f60e]":"emoji_1f60e","[0x1f60f]":"emoji_1f60f","[0x1f61a]":"emoji_1f61a","[0x1f61b]":"emoji_1f61b","[0x1f61c]":"emoji_1f61c","[0x1f61d]":"emoji_1f61d","[0x1f61e]":"emoji_1f61e","[0x1f61f]":"emoji_1f61f","[0x1f62a]":"emoji_1f62a","[0x1f62b]":"emoji_1f62b","[0x1f62c]":"emoji_1f62c","[0x1f62d]":"emoji_1f62d","[0x1f62e]":"emoji_1f62e","[0xdelete2]":"emoji_delete","[0x1f62f]":"emoji_1f62f","[0x1f63a]":"emoji_1f63a","[0x1f63b]":"emoji_1f63b","[0x1f63c]":"emoji_1f63c","[0x1f63d]":"emoji_1f63d","[0x1f63e]":"emoji_1f63e","[0x1f63f]":"emoji_1f63f","[0x1f60a]":"emoji_1f60a","[0x1f695]":"emoji_1f695","[0x26a1]":"emoji_26a1","[0x26bd]":"emoji_26bd","[Ox1f41c]":"emoji_1f41c","[0x1f47b]":"emoji_1f47b","[0x2600]":"emoji_2600","[0x2728]":"emoji_2728","[0x1f31b]":"emoji_1f31b"},parseFace:function(k){var j=this.faceObj;return k.replace(/(\[[a-zA-Z_0-9]{6,20}\])/gi,function(m,l){if(j[l]){return'<img class="emoji" src="'+config.staticPath+"img/face/"+j[l]+'.png" alt="emoji - Boomplay">'}return l})},parseComment:function(j){j=$.trim(j);return this.parseFace(j.replace(/\r\n|[\r\n]/g,"<br>").replace(/  /g," &nbsp;"))},userAgent:navigator.userAgent.toLowerCase(),isIE10_:function(){return this.userAgent.indexOf("compatible")>-1&&this.userAgent.indexOf("msie")>-1},isIE11:function(){return this.userAgent.indexOf("trident")>-1&&this.userAgent.indexOf("rv:11.0")>-1},isChrome:function(){return navigator.vendor==="Google Inc."},isAndroid:function(){return this.userAgent.match(/android/i)},isiOS:function(){return this.userAgent.match(/(iPhone|iPod|iPad);?/i)},createXHR:function(){return new XMLHttpRequest()},blobTimeStart:0,blobTimeOut:null,blobRun:function(){this.blobStop();this.blobTimeOut=setTimeout(function(){lhx.audioUtils.playInNet()},30*1000)},blobStop:function(){this.blobTimeOut&&clearTimeout(this.blobTimeOut)},getBlob:function(j){var k=this;var l=lhx.createXHR();if("onprogress" in l){this.blobRun()}l.onprogress=function(m){if(!m.loaded||!m.total){k.blobStop();return}if(m.loaded===m.total){k.blobStop()}else{k.blobRun()}};l.onload=function(m){if((l.status>=200&&l.status<300)||l.status===304){if(j.success){j.success(l.response)}}else{j.error(l)}};l.onerror=function(m){j.error(m)};l.open("GET",j.url,true);l.responseType="blob";l.setRequestHeader("X-Boomplay-Ref","Boomplay_WEBV1");l.send(null);return l},getLastToken:function(){var k=this.MD5(lhx.getUUID(16));var j="Web1.0";return this.MD5(j+k+this.token)},getParamByLog:function(j,k){var l=this.MD5(lhx.getUUID(16));return{check:this.MD5(l+j+k+"d3rjfj230dkdkd3rfffwe455d2wswef",32),id:l}},changeCount:function(l,j){if(l.hasClass("audioOperation_favorite")){l=$(".favorite_event:not(.audioOperation_favorite)")}var k=l.attr("data-count");if(k===undefined){return}if(j){k++}else{k--}k=k<0?0:k;l.attr("data-count",k);l.text(this.parseCount(k))},getUUID:function(l){var n="0123456789ABCDEFGJKMNOPQRSTUVWYZIsLuoHengXabcdfhijklmpqrtvwxyz".split("");var k=[];l=l||n.length;var m;k[8]=k[13]=k[18]=k[23]="-";k[14]="4";for(var j=0;j<l;j++){if(!k[j]){m=0|Math.random()*16;k[j]=n[(j===19)?(m&3)|8:m]}}return k.join("")},MD5:function(D,o){var K=D+"";function Q(x,k){return(x<<k)|(x>>>(32-k))}function P(H,x){var ae,k,G,I,F;G=(H&2147483648);I=(x&2147483648);ae=(H&1073741824);k=(x&1073741824);F=(H&1073741823)+(x&1073741823);if(ae&k){return(F^2147483648^G^I)}if(ae|k){if(F&1073741824){return(F^3221225472^G^I)}else{return(F^1073741824^G^I)}}else{return(F^G^I)}}function w(k,G,F){return(k&G)|((~k)&F)}function v(k,G,F){return(k&F)|(G&(~F))}function u(k,G,F){return(k^G^F)}function s(k,G,F){return(G^(k|(~F)))}function z(G,F,af,ae,k,H,I){G=P(G,P(P(w(F,af,ae),k),I));return P(Q(G,H),F)}function l(G,F,af,ae,k,H,I){G=P(G,P(P(v(F,af,ae),k),I));return P(Q(G,H),F)}function N(G,F,af,ae,k,H,I){G=P(G,P(P(u(F,af,ae),k),I));return P(Q(G,H),F)}function y(G,F,af,ae,k,H,I){G=P(G,P(P(s(F,af,ae),k),I));return P(Q(G,H),F)}function j(ae){var af;var G=ae.length;var F=G+8;var x=(F-(F%64))/64;var I=(x+1)*16;var ag=Array(I-1);var k=0;var H=0;while(H<G){af=(H-(H%4))/4;k=(H%4)*8;ag[af]=(ag[af]|(ae.charCodeAt(H)<<k));H++}af=(H-(H%4))/4;k=(H%4)*8;ag[af]=ag[af]|(128<<k);ag[I-2]=G<<3;ag[I-1]=G>>>29;return ag}function L(F){var x="",G="",H,k;for(k=0;k<=3;k++){H=(F>>>(k*8))&255;G="0"+H.toString(16);x=x+G.substr(G.length-2,2)}return x}var M=[];var U,n,O,A,m,ad,ac,ab,aa;var X=7,V=12,S=17,R=22;var J=5,E=9,C=14,B=20;var t=4,r=11,q=16,p=23;var Z=6,Y=10,W=15,T=21;M=j(K);ad=1732584193;ac=4023233417;ab=2562383102;aa=271733878;for(U=0;U<M.length;U+=16){n=ad;O=ac;A=ab;m=aa;ad=z(ad,ac,ab,aa,M[U+0],X,3614090360);aa=z(aa,ad,ac,ab,M[U+1],V,3905402710);ab=z(ab,aa,ad,ac,M[U+2],S,606105819);ac=z(ac,ab,aa,ad,M[U+3],R,3250441966);ad=z(ad,ac,ab,aa,M[U+4],X,4118548399);aa=z(aa,ad,ac,ab,M[U+5],V,1200080426);ab=z(ab,aa,ad,ac,M[U+6],S,2821735955);ac=z(ac,ab,aa,ad,M[U+7],R,4249261313);ad=z(ad,ac,ab,aa,M[U+8],X,1770035416);aa=z(aa,ad,ac,ab,M[U+9],V,2336552879);ab=z(ab,aa,ad,ac,M[U+10],S,4294925233);ac=z(ac,ab,aa,ad,M[U+11],R,2304563134);ad=z(ad,ac,ab,aa,M[U+12],X,1804603682);aa=z(aa,ad,ac,ab,M[U+13],V,4254626195);ab=z(ab,aa,ad,ac,M[U+14],S,2792965006);ac=z(ac,ab,aa,ad,M[U+15],R,1236535329);ad=l(ad,ac,ab,aa,M[U+1],J,4129170786);aa=l(aa,ad,ac,ab,M[U+6],E,3225465664);ab=l(ab,aa,ad,ac,M[U+11],C,643717713);ac=l(ac,ab,aa,ad,M[U+0],B,3921069994);ad=l(ad,ac,ab,aa,M[U+5],J,3593408605);aa=l(aa,ad,ac,ab,M[U+10],E,38016083);ab=l(ab,aa,ad,ac,M[U+15],C,3634488961);ac=l(ac,ab,aa,ad,M[U+4],B,3889429448);ad=l(ad,ac,ab,aa,M[U+9],J,568446438);aa=l(aa,ad,ac,ab,M[U+14],E,3275163606);ab=l(ab,aa,ad,ac,M[U+3],C,4107603335);ac=l(ac,ab,aa,ad,M[U+8],B,1163531501);ad=l(ad,ac,ab,aa,M[U+13],J,2850285829);aa=l(aa,ad,ac,ab,M[U+2],E,4243563512);ab=l(ab,aa,ad,ac,M[U+7],C,1735328473);ac=l(ac,ab,aa,ad,M[U+12],B,2368359562);ad=N(ad,ac,ab,aa,M[U+5],t,4294588738);aa=N(aa,ad,ac,ab,M[U+8],r,2272392833);ab=N(ab,aa,ad,ac,M[U+11],q,1839030562);ac=N(ac,ab,aa,ad,M[U+14],p,4259657740);ad=N(ad,ac,ab,aa,M[U+1],t,2763975236);aa=N(aa,ad,ac,ab,M[U+4],r,1272893353);ab=N(ab,aa,ad,ac,M[U+7],q,4139469664);ac=N(ac,ab,aa,ad,M[U+10],p,3200236656);ad=N(ad,ac,ab,aa,M[U+13],t,681279174);aa=N(aa,ad,ac,ab,M[U+0],r,3936430074);ab=N(ab,aa,ad,ac,M[U+3],q,3572445317);ac=N(ac,ab,aa,ad,M[U+6],p,76029189);ad=N(ad,ac,ab,aa,M[U+9],t,3654602809);aa=N(aa,ad,ac,ab,M[U+12],r,3873151461);ab=N(ab,aa,ad,ac,M[U+15],q,530742520);ac=N(ac,ab,aa,ad,M[U+2],p,3299628645);ad=y(ad,ac,ab,aa,M[U+0],Z,4096336452);aa=y(aa,ad,ac,ab,M[U+7],Y,1126891415);ab=y(ab,aa,ad,ac,M[U+14],W,2878612391);ac=y(ac,ab,aa,ad,M[U+5],T,4237533241);ad=y(ad,ac,ab,aa,M[U+12],Z,1700485571);aa=y(aa,ad,ac,ab,M[U+3],Y,2399980690);ab=y(ab,aa,ad,ac,M[U+10],W,4293915773);ac=y(ac,ab,aa,ad,M[U+1],T,2240044497);ad=y(ad,ac,ab,aa,M[U+8],Z,1873313359);aa=y(aa,ad,ac,ab,M[U+15],Y,4264355552);ab=y(ab,aa,ad,ac,M[U+6],W,2734768916);ac=y(ac,ab,aa,ad,M[U+13],T,1309151649);ad=y(ad,ac,ab,aa,M[U+4],Z,4149444226);aa=y(aa,ad,ac,ab,M[U+11],Y,3174756917);ab=y(ab,aa,ad,ac,M[U+2],W,718787259);ac=y(ac,ab,aa,ad,M[U+9],T,3951481745);ad=P(ad,n);ac=P(ac,O);ab=P(ab,A);aa=P(aa,m)}if(o==32){return L(ad)+L(ac)+L(ab)+L(aa)}else{return L(ac)+L(ab)}},recaptchaCheck:function(k,l){var j={response:k,canLogin:"T"};lhx.dialog.loading.show("loading...");$.ajax({type:"POST",url:"/recaptcha",dataType:"json",data:JSON.stringify(j),contentType:"application/json;charset=utf-8",success:function(m){if(m.code==="success"){lhx.dialog.loading.close();l&&l();if($("#recaptchaID").length){lhx.pajax.getData(location.href)}recaptchaReset()}else{lhx.dialog.toast.show(m.desc||"");lhx.dialog.loading.close()}},error:function(m){lhx.dialog.toast.show(config.error.network,true,true);lhx.dialog.loading.close()}})},setFBJs:function(){lhx.loadScript(config.other.facebookJS,function(){e.fbAsyncInit=function(){FB.init({appId:config.other.facebookId,cookie:true,xfbml:true,version:"v2.8"})}})},getCookie:function(m){var k=document.cookie;var n=k.indexOf(m);if(n!==-1){n=n+m.length+1;var j=k.indexOf(";",n);if(j===-1){j=k.length}var l=unescape(k.substring(n,j))}return l},info:{project:"Base utils",version:"2.0",author:"HengxingLuo",email:"1518849189@qq.com"}};lhx.loadScript=function(k,j){if(!lhx.loadScript.cache||!lhx.loadScript.cache[k]){lhx.loadScript.cache={},lhx.loadScript.cache[k]="T";var l=document.createElement("script");l.type="text/javascript",l.readyState?l.onreadystatechange=function(){("loaded"===l.readyState||"complete"===l.readyState)&&(l.onreadystatechange=null,j())}:l.onload=function(){j()},l.src=k,document.body.appendChild(l)}};lhx.comment={initTime:function(){var m=$("time[data-timestamp]");for(var l=0,j=m.length;l<j;l++){var k=m.eq(l);var n=Number(k.attr("data-timestamp"));k.text(lhx.getDateTimeWithTimestamp(n)).removeAttr("data-timestamp")}},initCommentContent:function(){var n=$(".comment_content .comment_content_text[data-parse]");for(var m=0,j=n.length;m<j;m++){var k=n.eq(m);k.removeAttr("data-parse");var l=lhx.parseComment(k.html());k.html(l);this.contentCollapse(k)}},initCollapse:function(){var m=$(".comment_content .comment_content_text[data-parse]");for(var l=0,j=m.length;l<j;l++){var k=m.eq(l);k.removeAttr("data-parse");this.contentCollapse(k)}},contentCollapse:function(k){var j=k[0].scrollHeight;if(j>config.constant.maxCommentHeight){k.css({height:config.constant.maxCommentHeight+"px"});k.after('<button class="showMore"  data-showMore="Show more >>" data-collapse="Collapse">Show more >></button>')}},more:function(m){var l="";for(var k=0,j=m.length;k<j;k++){l+=this.getCommentItemHtml(m[k])}return l},getCommentItemHtml:function(o){var l="";l+='<article class="comment">    <a href="javascript:;" class="default default_user_icon '+(o.sex==="F"?"female_icon":"")+'">';if(o.avatar){l+='<div class="img" style="background-image: url('+config.staticAddr+o.avatar+')"></div>'}l+='</a>    <div class="right">        <h2 class="name">'+o.userName+'</h2>        <div class="comment_content"><div class="comment_content_text" data-parse="">';if(o.beComment){l+='<a class="at_name" href="javascript:;"                   data-afid="'+o.beComment.afid+'"        >@'+o.beComment.userName+": </a>"}l+=lhx.parseComment(o.comment)+"</div>";var k=o.sources;if(k){var m=k[0];if(m){if(m.indexOf("https")!==0){m=config.staticAddr+m}l+='<img class="commentImg" src="'+m+'" alt="Boomplay Music">'}}l+="</div>";if(o.beComment){l+='<div class="comment_content replay_content"><div class="comment_content_text" data-parse="">   <a class="at_name" href="javascript:;"   data-afid="'+o.beComment.afid+'"   >'+o.beComment.userName+": </a>"+lhx.parseComment(o.beComment.comment)+"</div>";var j=o.beComment.sources;if(j){var n=j[0];if(n){if(n.indexOf("https")!==0){n=config.staticAddr+n}l+='<img class="commentImg" src="'+n+'" alt="Boomplay Music">'}}l+="</div>"}l+='<footer class="foot">        <button class="openReply"                 data-formSrc="'+config.basePath+'/replyComment"                data-targetID="'+o.targetID+'"                data-commentID="'+o.commentID+'"></button>        <button class="agreeBtn agree_event '+(o.isLike==="T"?"isAgree":"")+'"                data-targetID="'+o.targetID+'"                data-commentID="'+o.commentID+'"                data-count="'+o.likeCount+'"        >'+lhx.parseCount(o.likeCount)+"</button>        <address>"+o.country+"</address>        <time>"+lhx.getDateTimeWithTimestamp(o.addDate)+"</time>    </footer></div></article>";return l},face:{createFacePop:function(j){var k=j.find("ul");if(k.html()){return}var m="";var o=lhx.faceObj;var q=config.staticPath;for(var l in o){var p=o[l];var n=q+"img/face/"+p+".png";m+='<li><button data-value="'+l+'" data-imgSrc="'+n+'" style="background-image: url('+n+')"></button></li>'}k.html(m)},isOpen:false,open:function(j){if(!lhx.login.isLogin()){return}this.close();this.createFacePop(j);j.addClass("show");this.isOpen=true;var l=j.offset().top+220-$(e).height();if(l>0){var k=$(".main");k.animate({scrollTop:k.scrollTop()+l+"px"},300)}},close:function(j){$(".pop_face").removeClass("show");this.isOpen=false},toggle:function(k){var l=k.parents(".createReplayWrap");lhx.comment.createComment.focus(l);var j=l.find(".pop_face");if(j.hasClass("show")){this.close()}else{this.open(j)}}},createComment:{tip:function(){lhx.dialog.toast.show(config.msg.commentContentTroppo)},calcNum:function(k,j){$("iframe[name="+j+"]").parents(".createReplayWrap").find(".createReplay_num").text(k)},getContent:function(j){return j.find("iframe")[0].contentWindow.myEdit.content()},focus:function(j){j.find("iframe")[0].contentWindow.myEdit.toFocus()},isLogin:function(){if(!lhx.login.isLogin()){lhx.login.open();return false}return true},insert:function(k,j){k.find("iframe")[0].contentWindow.myEdit.insert(j)},clear:function(j){j.find("iframe")[0].contentWindow.myEdit.clearContent()}},createReplay_dynamic:function(k){var j='<div class="createReplayWrap createReplay_dynamic">    <div class="createReplay_inner">        <div class="createReplay edit">            <iframe name="richEdit_dynamic" src="'+config.staticPath+'html/edit.html?version=2" frameborder="0"></iframe>        </div>        <div class="createReplay_numWrap">            <span class="createReplay_num">0</span>/<span class="createReplay_total">'+config.constant.maxCommentContent+'</span>        </div>    </div>    <div class="createReplay_foot">        <button class="openFace"></button>        <button class="submitComment"                data-formSrc="'+k.attr("data-formSrc")+'"               data-targetID="'+k.attr("data-targetID")+'"               data-commentID="'+k.attr("data-commentID")+'"               >Comment</button>        <div class="pop_face">            <button class="close"></button>            <ul></ul>        </div>    </div></div>';k.parents(".foot").append(j)},submitComment:function(n){if(!lhx.login.isLogin()){lhx.login.open();return}var o=n.parents(".createReplayWrap");var l=lhx.comment.createComment.getContent(o);if(!$.trim(l).replace(/\r\n/g,"")){lhx.dialog.toast.show(config.error.commentEmpty);return}var j={comment:l,targetID:n.attr("data-targetID")};var k=n.attr("data-commentID");if(k){j.commentID=k}var m=n.attr("data-targetType");if(m){j.targetType=m}lhx.dialog.loading.show("Loading...");$.ajax({type:"POST",url:n.attr("data-formSrc"),dataType:"json",data:JSON.stringify(j),contentType:"application/json;charset=utf-8",success:function(s){if(s.code==="success"){lhx.comment.createComment.clear(o);var q=lhx.comment.getCommentItemHtml(s.resultData);var t=$(".newComments");t.children("h2").after(q);var p=$(".commentNoData");if(p.length){p.remove()}lhx.changeCount($(".commentCount"),true);var r=$(".main");r.animate({scrollTop:r.scrollTop()+t.offset().top-300+"px"},300);if(k){$(".createReplay_dynamic").addClass("hidden").slideUp(300)}lhx.comment.initCollapse()}else{if(s.code==="2005"){lhx.login.autoLoginCan()}}lhx.dialog.toast.show(s.desc||"");lhx.dialog.loading.close()},error:function(p){console.log(p);lhx.dialog.toast.show(config.error.network,true,true);lhx.dialog.loading.close()}})},agreeOrDisagree:function(n){if(!lhx.login.isLogin()){lhx.login.open();return}var m=!n.hasClass("isAgree");var l=n.attr("data-commentID");var j={targetID:n.attr("data-targetID"),commentID:l};lhx.dialog.loading.show("Loading...");var o=config.basePath+"/disagreeComment";if(m){o=config.basePath+"/agreeComment"}var k=$(".agree_event[data-commentID="+l+"]");$.ajax({type:"POST",url:o,dataType:"json",data:JSON.stringify(j),contentType:"application/json;charset=utf-8",success:function(p){if(p.code==="success"){lhx.dialog.toast.show(p.desc);if(m){k.addClass("isAgree");lhx.changeCount(k,true)}else{k.removeClass("isAgree");lhx.changeCount(k)}}lhx.dialog.toast.show(p.desc||"");lhx.dialog.loading.close()},error:function(p){console.log(p);lhx.dialog.toast.show(config.error.network,true,true);lhx.dialog.loading.close()}})},positionToComment:function(){var j=$(".main");j.animate({scrollTop:j.scrollTop()+$(".commentsWrap").offset().top-60+"px"},300)},positionTo:function(){var k=location.href;var l=k.lmx_parseToObjWithURL();if(l&&l["goto"]==="comment"){this.positionToComment();var j="";if(l.length===1){j=k.replace("goto=comment&","").replace("&goto=comment","")}else{j=k.replace("?goto=comment","")}history.replaceState(j,"",j);location.href.replace()}}};$(document).on({click:function(){var k=$(this);if(k.hasClass("collapse")){k.removeClass("collapse");k.text(k.attr("data-showMore"));k.siblings(".comment_content_text").animate({height:config.constant.maxCommentHeight+"px"},300)}else{k.addClass("collapse");k.text(k.attr("data-collapse"));var j=k.siblings(".comment_content_text");j.animate({height:j[0].scrollHeight},300,"swing",function(){$(this).css({height:"auto"})})}}},".showMore");lhx.buzz={agreeOrDisagree:function(l){if(!lhx.login.isLogin()){lhx.login.open();return}var k=!l.hasClass("isAgree");var j={buzzID:l.attr("data-buzzID")};lhx.dialog.loading.show("Loading...");var m=config.basePath+"/disagreeBuzz";if(k){m=config.basePath+"/agreeBuzz"}$.ajax({type:"POST",url:m,dataType:"json",data:JSON.stringify(j),contentType:"application/json;charset=utf-8",success:function(n){if(n.code==="success"){lhx.dialog.toast.show(n.desc);if(k){l.addClass("isAgree");lhx.changeCount(l,true)}else{l.removeClass("isAgree");lhx.changeCount(l)}}lhx.dialog.toast.show(n.desc||"");lhx.dialog.loading.close()},error:function(n){console.log(n);lhx.dialog.toast.show(config.error.network,true,true);lhx.dialog.loading.close()}})},sliderTo:function(){var j=location.href;var k=j.lmx_parseToObjWithURL();if(k&&k.type==="buzz"){lhx.sliderNav.change($(".sliderNav button").eq(1))}},initBuzzContent:function(){var j=$(".initBuzzContentPart");var k=j.html();j.html(lhx.parseFace(k));this.initCard()},initCard:function(u){var r=$(".initBuzzContentPart a");for(var m=0;m<r.length;m++){var t=r.eq(m);var s=t.attr("data-type");var k=t.attr("onclick");if(k==="gotoBp_fun(this);"||(k==="gotoBp_stream_fun(this);"&&(s==="MUSIC"||s==="PLAYLIST"))){var j=t.attr("data-msg");if(!j){continue}var l=$.parseJSON(j);var n="";var q=l.title.replace(/#/g,"");var p=t.attr("data-itemid");switch(s){case"WEB":case"HREF":t.replaceWith(this.item.createHREF(l.url,q));break}}else{var o=t.attr("href");if(o&&/^http/.test(o)){t.attr("data-link","normal").attr("target","_new")}}}},item:{createHREF:function(j,k){return'<br /><a style="color: #0052ff;" target="_boomplay" data-link="normal" href="'+j+'">'+k+"</a>"}}};lhx.readMore={maxLine:2,init:function(){var n=$(".summary .description");var j=n.find(".readMoreBtnWrap");if(n.length<1||j.length<1){return}var l=n.find(".description_content");var m=l.attr("data-text");if(m){l.text(m)}var s=n[0].scrollHeight;var p=parseInt(n.css("line-height"));var q=p*this.maxLine+Math.floor(p/2);if(s<=q){j.removeClass("show");return}j.addClass("show");var r=l.text();if(!m){l.attr("data-text",r)}var k=3+4;while(s>q){var o=r.substring(0,r.length-k++);l.text(o);r=o;s=n[0].scrollHeight}o=r.substring(0,r.length-10);l.text(o)},open:function(){$(".pop_descriptionReadMore_mask,.pop_descriptionReadMore").addClass("show")},close:function(){$(".pop_descriptionReadMore_mask,.pop_descriptionReadMore").removeClass("show")}};var h=lhx.EventUtil={addHandler:function(l,k,j){if(l.addEventListener){l.addEventListener(k,j,false)}else{if(l.attachEvent){l.attachEvent("on"+k,j)}}},removeHandler:function(l,k,j){if(l.removeEventListener){l.removeEventListener(k,j,false)}else{if(l.detachEvent){l.detachEvent("on"+k,j)}}},preventDefault:function(j){if(j.preventDefault){j.preventDefault()}else{j.returnValue=false}},stopPropagation:function(j){if(j.stopPropagation){j.stopPropagation()}else{j.cancelBubble=true}},getWheelDelta:function(j){if(j.wheelDelta){return j.wheelDelta}else{return -j.detail*40}}};var g=lhx.dialog={pageLoading:{show:function(){var j=$(".dialog_pageLoading");if(j.length){j.removeClass("hidden");return true}var k='<article class="dialog_pageLoading noneEvent">    <cite class="icon"></cite></article>';$("body").append(k)},close:function(){$(".dialog_pageLoading").addClass("hidden")}},loading:{show:function(n,j){var k=$(".dialog_loading");if(k.length>0){return true}var m="";if(n){m='<span class="text">'+n+"</span>"}j=j?"isInfinite":"";var l='<article class="dialog_loading '+j+'">    <div class="dialog_loading_inner">        <div class="content">            <cite class="icon"></cite>'+m+"        </div>    </div></article>";$("body").append(l)},close:function(){$(".dialog_loading").remove()}},toast:{id:0,show:function(q,k,o,n){q=q==="Sorry, this item is unavailable in your country due to copyright issues"?config.msg.notAvailable:q;var r=k?"hasIcon":"";var m=o?"isError":"";var j=++this.id;n=n||3000;var l='<article class="dialog_toast id_'+j+" noneEvent "+r+" "+m+'" style="animation: toast_hidden '+n+'ms forwards;">    <div class="center">        <div class="text">'+q+"</div>    </div></article>";var p=$("body").append(l);setTimeout(function(){$("body").find(".dialog_toast.id_"+j).remove()},n)}},confirm:{fn1:null,fn2:null,closeCallback:null,show:function(p,r,q,m,l,j){var o=this;var k=$(".dialog_confirm");this.fn1=r;this.fn2=q;this.closeCallback=j;if(k.length){k.addClass("show");$(".dialog_confirm_mask").addClass("show");k.find(".text").html(p);k.find(".cancel").html(m||"NO").focus();k.find(".sure").html(l||"Yes");return}var n='<div class="dialog_confirm_mask"></div><article class="dialog_confirm">    <h2><button class="close"></button></h2>    <div class="text">'+p+'</div>    <button class="cancel">'+(m||"NO")+'</button>    <button class="sure">'+(l||"Yes")+"</button></article>";$("body").append(n);setTimeout(function(){$(".dialog_confirm,.dialog_confirm_mask").addClass("show");$(".dialog_confirm .cancel").focus()});$(document).on({click:function(){o.close();var s=$(".dialog_confirm");o.closeCallback&&o.closeCallback(o,s)}},".dialog_confirm .close");$(document).on({click:function(){var s=$(".dialog_confirm");o.fn1&&o.fn1(o,s);o.close()}},".dialog_confirm .cancel");$(document).on({click:function(){var s=$(".dialog_confirm");o.fn2&&o.fn2(o,s);o.close()}},".dialog_confirm .sure")},close:function(){$(".dialog_confirm,.dialog_confirm_mask").removeClass("show");this.fn1=null;this.fn2=null}},download:{fn1:null,fn2:null,show:function(n,l,j){var m=this;var o=$(".dialog_download");this.fn1=l;this.fn2=j;if(o.length){o.addClass("show");$(".dialog_download_mask").addClass("show");o.find(".text").html(n);return}var k='<div class="dialog_download_mask"></div><article class="dialog_download">    <h2><strong>Download</strong><button class="close"></button></h2>    <div class="text">'+n+'</div>    <a class="downloadFromGooglePlay"       href="https://play.app.goo.gl/?link=https://play.google.com/store/apps/details?id=com.afmobi.boomplayer&amp;ddl=1&amp;pcampaignid=web_ddl_1"       target="_googlePlay" data-link="normal" rel="nofollow"></a>    <a class="downloadFromAppStore"       href="https://itunes.apple.com/cn/app/id1437251983?mt=1"       target="_appStore" data-link="normal" rel="nofollow"></a></article>';$("body").append(k);setTimeout(function(){$(".dialog_download,.dialog_download_mask").addClass("show");$(".dialog_download .downloadFromGooglePlay").focus()},200);$(document).on({click:function(){m.close()}},".dialog_download .close");$(document).on({click:function(){var p=$(".dialog_download");m.fn1&&m.fn1(m,p);m.close();lhx.logUtils.logACT("TO_GOOGLEPLAY")}},".dialog_download .downloadFromGooglePlay");$(document).on({click:function(){var p=$(".dialog_download");m.fn2&&m.fn2(m,p);m.close();lhx.logUtils.logACT("TO_APPSTORE")}},".dialog_download .downloadFromAppStore")},close:function(){$(".dialog_download,.dialog_download_mask").removeClass("show");this.fn1=null;this.fn2=null}},recaptcha:{show:function(k){var l=this;var m=$(".dialog_recaptcha");if(m.length){m.addClass("show");$(".dialog_recaptcha_mask").addClass("show")}else{var j='<div class="dialog_recaptcha_mask"></div><article class="dialog_recaptcha noneSelect">   <div id="recaptchaID_dialog"></div></article>';$("body").append(j);setTimeout(function(){$(".dialog_recaptcha,.dialog_recaptcha_mask").addClass("show")},200)}recaptchaOnload(k)},close:function(){$(".dialog_recaptcha,.dialog_recaptcha_mask").removeClass("show")}}};$(document).on({click:function(){lhx.logUtils.logACT("TO_GOOGLEPLAY")}},".toGooglePlay_event");$(document).on({click:function(){lhx.logUtils.logACT("TO_APPSTORE")}},".toAppStore_event");var a=lhx.pajax={support:{pushSate:"pushState" in history,onhashchange:("onhashchange" in e)&&(document.documentMode===undefined||document.documentMode>7)},currentAjax:null,pajaxAbort:function(){this.currentAjax&&this.currentAjax.abort()},getData:function(k,m){var l=this;this.pajaxAbort();var j=$(".pageContent");if(e.pageJS){e.pageJS.destroy(j.attr("id"))}j.html("");lhx.dialog.pageLoading.show();this.currentAjax=$.ajax({type:"GET",url:k,success:function(n){l.changePageContent(n)},error:function(n){if(n.status===404&&!m){l.getData(config.request.page_404,true)}else{if(n.status===500&&!m){l.getData(config.request.page_500,true)}}lhx.dialog.pageLoading.close()}})},getData_fromPart:function(j,m,n){var l=this;this.pajaxAbort();var k=$(m);lhx.dialog.pageLoading.show();history.replaceState({href:j},"",j);this.currentAjax=$.ajax({type:"GET",url:j,success:function(o){l.changePAjaxPart(m,o)},error:function(o){if(o.status===404&&!n){l.getData(config.request.page_404,true)}else{if(o.status===500&&!n){l.getData(config.request.page_500,true)}}lhx.dialog.pageLoading.close()}})},changePAjaxPart:function(l,m){var k=$(l);var j=$(document.createElement("div"));j.html(m);var n=j.find(l);k.html(n.html());if(lhx.login.isLoginUI()){if(j.find(".userInfo .logout_info").length){lhx.login.loginOut()}else{if(j.find(".userInfo .autoLogin_info").length){lhx.login.autoLoginCan()}}}lhx.dialog.pageLoading.close()},isInit:false,init:function(){var p=this;if(this.isInit){return}this.isInit=true;$(document).on({click:function(r){r.stopPropagation();var q=$(this);var t=q.attr("href");if(q.attr("data-link")==="normal"||t.indexOf("javascript")!==-1){return}r.preventDefault();var s=q.attr("data-partTo");if(s){p.getData_fromPart(t,s);return}p.pajaxTo(t)}},"a");if(e.pageJS){e.pageJS.init($(".pageContent").attr("id"))}if(this.support.pushSate){h.addHandler(e,"popstate",function(q){var r=q.state;if(r){p.getData(r.href)}});if(location.hash){location.href=location.hash.substring(1)}history.replaceState({href:location.href,first:true},"");return}if(this.support.onhashchange){var k=function(){var q=location.hash.substring(1);if(!q){q=p.getLastUrl(location.href)}p.getData(q)};k();h.addHandler("hashchange",k);return}var m=document.getElementById("iframe");if(!m){m=document.createElement("iframe");m.id="iframe";m.style.display="none";document.body.appendChild(m)}if(e==top){var l=location.href.split("#")[1];if(!location.hash.substring(1)){l=this.getLastUrl(location.href)}m.src=l+(l.indexOf("?")===-1?"?":"&")+"v=1"}else{var j=top.document.getElementsByTagName("main")[0],o=document.getElementsByTagName("main")[0],n=document.title;if(n){top.document.title=n}if(top.pageJS){top.pageJS.destroy(j.id)}j.id=o.id;j.innerHTML=o.innerHTML;top.location.hash=this.getLastUrl(location.href).replace(/[\?&]v=1/,"");if(top.pageJS){top.pageJS.init(j.id)}}},changePageContent:function(o){var m=$(".pageContent");var l=$(document.createElement("div"));l.html(o);var q=l.find(".pageContent");var k=q.attr("id");var p=l.find("title").html();if(p){$("title").html(p)}var j=l.find("link[rel=canonical]").attr("href");if(j){$("link[rel=canonical]").attr("href",j)}var n=l.find("meta[name=description]").attr("content");if(n){$("meta[name=description]").attr("content",n)}sideBarNav.pajax_initNav(q.attr("data-nav"));m.attr("id",k);m.html(q.html());if(lhx.login.isLoginUI()){if(l.find(".userInfo .logout_info").length){lhx.login.loginOut()}else{if(l.find(".userInfo .autoLogin_info").length){lhx.login.autoLoginCan()}}}lhx.dialog.pageLoading.close();if(e.pageJS){e.pageJS.init(k)}},pajaxTo:function(k){if(this.support.pushSate){if(k!==location.pathname&&k!==location.href){history.pushState({href:k},"",k)}this.getData(k);return}if(this.support.onhashchange){location.hash=this.getLastUrl(k);this.getData(k);return}var j=document.getElementById("iframe");j.src=k+(k.indexOf("?")===-1?"?":"&")+"ver=1"},getLastUrl:function(k){var j=k.split("/");return j[j.length-1]}};var i=lhx.logUtils={upload:function(j){$.ajax({type:"post",url:config.request.log,data:j,beforeSend:function(k){k.setRequestHeader("refererWeb",lhx.getLastToken())},success:function(k){},error:function(k){}})},logACT:function(l){var k={evtCat:"ACT",evtID:"USER_RET",logSource:l};var j=lhx.getParamByLog("","");k.check=j.check;k.id=j.id;this.upload(k)},logPlay30:function(){var k=location.href.lmx_parseToObjWithURL();var j=k.srModel||"Web";var l=k.ffm||"";i.logITEM(b.currentId,j,"MUSIC","PLAY","SONG_PLAY",undefined,l)},logPlayStop:function(){var k=location.href.lmx_parseToObjWithURL();var j=k.srModel||"Web";var l=Math.round(this.playTime);if(!l){return}this.playTime=0;i.logITEM(b.currentId,j,"MUSIC","PLAYSTOP","SONG_PLAYSTOP",l)},playTime:0,playTime_temp:0,playTime_start:0,playTime_end:0,playTime_isLog:false,playTime_reset:function(){this.playTime=0;this.playTime_temp=0;this.playTime_isLog=false;this.playTime_start=new Date().getTime();this.playTime_end=new Date().getTime()},setPlayTime_start:function(){this.playTime_start=new Date().getTime()},setPlayTime_end:function(){this.playTime_end=new Date().getTime();this.playTime_temp+=(this.playTime_end-this.playTime_start);this.playTime_start=this.playTime_end},askIsMore30:function(){if(c.paused||b.isPaused){return}this.playTime=(this.playTime_temp+new Date().getTime()-this.playTime_start)/1000;if(this.playTime_isLog){return}if(this.playTime<30){return}this.playTime_isLog=true;i.logPlay30()},logITEM:function(j,r,p,n,l,k,s){var m={evtCat:"ITEM",itemID:j,itemType:p,evtTrigger:n,evtID:l,rcmdEngine:b.rcmdEngine||"",rcmdEngineVersion:b.rcmdEngineVersion||0};if(k!==undefined){m.playTime=k}if(r){m.logSource=r}if(s){m.ffm=s}var o=b.colID;if(o){m.colID=o}var q=lhx.getParamByLog(j,p);m.check=q.check;m.id=q.id;this.upload(m)},clickLog:function(k,m,l){var j={itemID:k.itemID,itemType:k.itemType,sns:m};if(l){var n=lhx.share.$this;lhx.changeCount(n,true)}$.ajax({url:config.request.shareCount,type:"post",data:j,dataType:"json",success:function(o){},error:function(o){}})},newLog:function(n,l,p,k){var o={id:lhx.getUUID(36),evtCat:n,evtTrigger:l,evtID:p,evtData:k};if(!o.evtData){o.evtData={}}var m=lhx.getCookie("afid");if(m){o.afid=m}o.evtData.actSource=this.getSourceWeb();var j={event:JSON.stringify([o])};this.uploadBatch(j)},getSourceWeb:function(){return $("#sourceWeb").val()},uploadBatch:function(j){$.ajax({url:config.request.batchUploadLogs,type:"post",dataType:"json",data:JSON.stringify(j),contentType:"application/json;charset=utf-8",beforeSend:function(k){k.setRequestHeader("refererWeb",lhx.getLastToken())},success:function(k){},error:function(k){}})}};lhx.openBp={bp:"bpmain://main/",bpIOs:"https://www.boomplaymusic.com/share/music/",googlePlay:"https://play.app.goo.gl/?link=https://play.google.com/store/apps/details?id=com.afmobi.boomplayer&amp;ddl=1&amp;pcampaignid=web_ddl_1",appStore:"https://apps.apple.com/cn/app/id1437251983",isAndroid:lhx.isAndroid(),isiOS:lhx.isiOS(),isChrome:lhx.isChrome(),toAppStoreAndGooglePlay:function(){e.open(this.googlePlay,"_googlePlay");e.open(this.appStore,"_appStore");lhx.logUtils.logACT("TO_GOOGLEPLAY");lhx.logUtils.logACT("TO_APPSTORE")}};e.requestAnimationFrame=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||function(n){var j=this,m,k;var l=e.setTimeout(function(){m=+new Date();n(m);k=+new Date();j.timeout=1000/60-(k-m)},j.timeout);return l};e.cancelAnimationFrame=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame||e.mozCancelAnimationFrame||e.mozCancelRequestAnimationFrame||e.msCancelAnimationFrame||e.msCancelRequestAnimationFrame||function(j){clearTimeout(j)};function f(){try{if(typeof localStorage==="object"){return localStorage}else{if(typeof globalStorage==="object"){return globalStorage[location.host]}}}catch(j){console.log("CalmLuo: 该浏览器不支持本地存储技术，或被禁用Cookie!")}}var d=lhx.storageUtils={storage:f(),storageTime:new Date().getTime(),version:"version",version_put:function(){d.setString(this.version,lhx.version)},version_get:function(){var j=this.getString(this.version);if(j){return j}return null},presetSongList:"presetSongList",songList:"songList",playItemIndex:"playItemIndex",playMode:"playMode",isPlaying:"isPlaying",favorite:"favorite",myPlaylists:"myPlaylists",countryModelSelected:"countryModelSelected",timestamp_signUp:"timestamp_signUp",timestamp_signUp_put:function(){d.setString(d.timestamp_signUp,new Date().getTime())},timestamp_signUp_get:function(){var j=d.getString(d.timestamp_signUp);if(j){return parseInt(j,10)}else{return 0}},timestamp_findPassword:"timestamp_findPassword",timestamp_findPassword_put:function(){d.setString(d.timestamp_findPassword,new Date().getTime())},timestamp_findPassword_get:function(){var j=d.getString(d.timestamp_findPassword);if(j){return parseInt(j,10)}else{return 0}},setObject:function(j,l){try{this.storage[j]=JSON.stringify(l);return true}catch(k){console.log("CalmLuo: 存储的数据不是json对象, 存储失败!");return false}},getObject:function(j){try{return JSON.parse(this.storage[j])}catch(k){return false}},setString:function(j,l){try{this.storage[j]=l;return true}catch(k){console.log("CalmLuo: 存储失败!");return false}},getString:function(j){try{return this.storage[j]}catch(k){return false}},clearValue:function(j){delete this.storage[j]},clearAll:function(){var j=this;try{j.storage.clear();return j}catch(k){return j}},cookieTip:"cookieTip",cookieTip_put:function(){d.setString(d.cookieTip,"T")},cookieTip_get:function(){var j=d.getString(d.cookieTip);if(j){return j}else{return 0}},initCookie:function(){var j=this;if(lhx.hasCookie()&&this.cookieTip_get()!=="T"){$(".cookieTipWrap").removeClass("hidden");$(".cookieTip_close").one("click",function(){$(".cookieTipWrap").addClass("hidden");j.cookieTip_put()})}}};var c=new Audio();c.loop=false;var b=lhx.audioUtils={currentId:0,rcmdEngine:"",rcmdEngineVersion:0,colID:0,canPlayingId:0,isPaused:true,isInPlaying:false,isEnded:true,$audioRail:null,$audioRail_buffered:null,$audioRail_current:null,$audioRail_dot:null,$audio_currentTime:null,$audio_duration:null,$audioInfo:null,init:function(){this.$audioRail=$(".audioRail");this.$audioRail_buffered=$(".audioRail_buffered");this.$audioRail_current=$(".audioRail_current");this.$audioRail_dot=$(".audioRail_dot");this.$audio_currentTime=$(".audio_currentTime");this.$audio_duration=$(".audio_duration");this.$audioInfo=$(".audioInfo");this.playMode_init();this.songList_init();this.playItemIndex_init();this.playModeUI_change(true);this.update_UIMsg();this.createSongListUI()},stopSongAndNet:function(){this.pause();this.abortNet();if(this.currentTime===0){this.init_rail()}},tryPlay:function(j,k){if(this.isEnded||!k||this.currentId!==this.currentMsg.id){this.isEnded=false;this.stopSongAndNet();this.status_loading();this.playInNet();return}if(c.readyState&&this.canPlayingId&&this.canPlayingId===this.currentId){if(lhx.openBp.isChrome){if(!j){this.currentTime=c.currentTime}this.encryptToPlay_can(true)}else{this.play()}return}this.currentId=0;this.rcmdEngine="";this.rcmdEngineVersion=0;this.colID=0;this.tryPlay()},play:function(){c.play();this.run();this.isPlaying_put()},pause:function(){lhx.blobStop();c.pause();this.status_pause();this.stop()},status_loading:function(){this.isPaused=false;this.isInPlaying=false;$(".audioUtils_btn_play").removeClass("status_playing").addClass("status_loading");this.playOneStatus_clear();this.playOneStatus_change()},status_playing:function(){i.setPlayTime_start();this.isPaused=false;this.isInPlaying=true;$(".audioUtils_btn_play").removeClass("status_loading").addClass("status_playing");this.playOneStatus_change()},status_pause:function(){this.isPaused=true;this.isInPlaying=false;$(".audioUtils_btn_play").removeClass("status_playing status_loading");this.playOneStatus_change();i.setPlayTime_end()},isRunning:false,animationId:null,run:function(){var k=this;if(this.isRunning){return}this.isRunning=true;this.animationId=requestAnimationFrame(j);var l=new Date().getTime();function j(){var m=new Date().getTime();if(m-l>100){l=m;k.update_rail()}k.animationId=requestAnimationFrame(j)}},stop:function(){this.isRunning=false;cancelAnimationFrame(this.animationId)},duration:0,currentTime:0,init_rail:function(){this.$audioRail_current.css({width:0});this.$audioRail_dot.css({left:0});this.$audio_currentTime.text("00:00")},update_rail:function(){var l=this.duration;if(this.isDragging||!l){return}var k=c.currentTime;var j=(k/l)*100+"%";this.$audioRail_current.css({width:j});this.$audioRail_dot.css({left:j});this.update_time(l,k)},update_time:function(k,j){this.$audio_duration.text(lhx.formatMinuteSecond(k));this.$audio_currentTime.text(lhx.formatMinuteSecond(j))},isDragging:false,scale:-1,mouseDown:function(j){this.isDragging=true;this.jump(j);this.encryptToPlay()},dragstart:function(){this.isDragging=true},dragging:function(j){if(this.isDragging){this.jump(j)}},dragend:function(j){if(this.isDragging){this.jump(j);this.encryptToPlay();this.isDragging=false}},jump:function(k){var l=this.$audioRail.width();var m=k-this.$audioRail.offset().left;if(m<0){m=0}else{if(m>l){m=l}}this.scale=m/l;var j=Math.floor(this.scale*10000)/100+"%";this.$audioRail_current.css({width:j});this.$audioRail_dot.css({left:j});this.currentTime=this.scale*this.duration;this.update_time(this.duration,this.currentTime)},setCurrentTime:function(){try{if(this.canPlayingId===this.currentId&&this.currentId){c.currentTime=this.currentTime}}catch(j){}},isPlaying_put:function(){d.storageTime=new Date().getTime();d.setString(d.isPlaying,d.storageTime)},isPlaying_get:function(){var j=d.getString(d.isPlaying);if(j){return j}else{return d.storageTime}},songList:[],songList_set:function(j){this.songList=j;this.songList_put()},songList_put:function(){d.setObject(d.songList,this.songList)},songList_init:function(){var j=d.getObject(d.songList);if(j){this.songList=j}else{this.songList=[]}return this.songList},presetSongList_put:function(){d.setString(d.presetSongList,"T")},presetSongList_get:function(){var j=d.getString(d.presetSongList);if(j){return j}else{return""}},initPresetSongList:function(){if(this.presetSongList_get()!=="T"){this.songList=["8788094%40%2B%23%40%2B%234431388%40%2B%23https%3A%2F%2Fsource.boomplaymusic.com%2Fgroup10%2FM00%2F07%2F27%2Fec99c071d53a4a34b421acacf4204964.jpg%40%2B%23I%20Wanna%20Dance%20with%20Somebody%40%2B%23Whitney%20Houston%40%2B%233501874%40%2B%2305%3A36@+#@+#","10120356%40%2B%23%40%2B%235176225%40%2B%23https%3A%2F%2Fsource.boomplaymusic.com%2Fhotgroup1%2FM00%2F00%2F7A%2FrBEenF6qdj-ALJ_sAABb7oHG7w0166.jpg%40%2B%23Solace%20%28Original%20Mix%29%40%2B%23Fangs%40%2B%232825939%40%2B%2304%3A40@+#@+#","23553114%40%2B%23%40%2B%239187003%40%2B%23https%3A%2F%2Fsource.boomplaymusic.com%2Fhotgroup1%2FM00%2F02%2FDA%2FrBEenF6q6YyAchRRAADugdk-GiA962.jpg%40%2B%23Marsh%20Mellow%20%28Original%20Mix%29%40%2B%23Terry%20G%40%2B%231124%40%2B%2307%3A12@+#@+#"];this.songList_put();this.presetSongList_put()}},playItemIndex:0,playItemIndex_set:function(j){this.playItemIndex=j;this.playItemIndex_put()},playItemIndex_put:function(){d.setString(d.playItemIndex,this.playItemIndex);return this},playItemIndex_init:function(){var j=parseInt(d.getString(d.playItemIndex));if(isNaN(j)||j<0){return this.playItemIndex=0}return this.playItemIndex=j},playModeArr:["loop","shuffle","order","single"],playModeArr_text:["Loop Mode","Shuffle Mode","Order Mode","Single Mode"],playMode:0,playMode_set:function(j){this.playMode=j;this.playMode_put()},playMode_put:function(){d.setString(d.playMode,this.playMode)},playMode_init:function(){var j=d.getString(d.playMode);if(j){this.playMode=parseInt(j,10)}else{this.playMode=0}return this.playMode},playModeUI_clear:function(j){j.removeClass("loop shuffle order single")},playModeUI_change:function(k){var j=$(".audioOperation_playMode");this.playModeUI_clear(j);j.addClass(this.playModeArr[this.playMode]);if(k){return}lhx.dialog.toast.show(this.playModeArr_text[this.playMode])},createSongListUI:function(){var n="";var l=this.songList;var k=l.length;if(k){this.footer_show()}else{this.footer_hidden()}$(".songList .count").text("("+k+")");for(var m=0;m<k;m++){var j=this.parseMsg(l[m]);n+='<li class="clearfix" data-id="'+j.id+'">    <div class="serialNum">'+(m+1)+'</div>    <i></i>    <div class="songNameWrap">        <a class="songName" href="/songs/'+j.id+'">'+j.name+'</a>    </div>    <a class="artistName" href="/artists/'+j.artistId+'">'+j.artist+'</a>    <div class="songAction">        <button class="play_icon"></button>        <button class="addPlaylist addPlaylist_event" data-id="'+j.id+'"></button>        <button class="deleteSong"></button>    </div></li>'}$(".songList ol").html(n)},footer_hidden:function(){$(".footer").removeClass("show");$(".main,.sidebar").removeClass("songListIsShow");$(".songList").removeClass("show")},footer_show:function(){$(".footer").addClass("show");$(".main,.sidebar").addClass("songListIsShow");$(".main").addClass("songListIsShow")},footer_min:function(){if($(".footer").hasClass("min")){$(".footer").addClass("show").removeClass("min");$(".main,.sidebar").addClass("songListIsShow");$(".main").addClass("songListIsShow")}else{$(".footer").removeClass("show").addClass("min");$(".main,.sidebar").removeClass("songListIsShow");$(".songList").removeClass("show")}},permission_vip_cannot:function(j){return(j>=1&&j<=3)||(j>=8&&j<=11)},permission_noVip_cannot:function(j){return j===2||j===4||j===6||j===8||j===12||j===14},permission_noVip_cannot_upCan:function(j){return j===4||j===6||j===12||j===14},playOne:function(l){var k=lhx.login.isVip();var j=parseInt(l.attr("data-permission"));if(k){if(b.permission_vip_cannot(j)){lhx.dialog.toast.show(config.msg.notAvailable,false,false);return"F"}}else{if(b.permission_noVip_cannot(j)){if(b.permission_noVip_cannot_upCan(j)){lhx.dialog.confirm.show(config.msg.needSubscribe_song,function(){},function(){lhx.openBp.toAppStoreAndGooglePlay()});return"F"}lhx.dialog.toast.show(config.msg.notAvailable,false,false);return"F"}}this.addSongList(l,false);this.playWithIndex()},playAll:function(k){var j=this.addSongList(k,true);if(j!=="F"){this.playWithIndex()}},addSongList:function(u,x){var m=u.parents(".playAllSons").find(".play_one");m.removeClass("current");var n=u.hasClass("isAlbum");var q=[];var o=0;var l=lhx.login.isVip();var j=0;var k=true;var p=0;var w=0;if(x){if(n){var v=parseInt(u.attr("data-permission"));if(l){if(b.permission_vip_cannot(v)){lhx.dialog.toast.show(config.msg.notAvailable,false,false);return"F"}}else{if(b.permission_noVip_cannot(v)){if(b.permission_noVip_cannot_upCan(v)){lhx.dialog.confirm.show(config.msg.needSubscribe_album,function(){},function(){lhx.openBp.toAppStoreAndGooglePlay()});return"F"}lhx.dialog.toast.show(config.msg.notAvailable,false,false);return"F"}}}}else{w=m.index(u)}for(var r=0,t=m.length;r<t;r++){var z=m.eq(r);var y=parseInt(z.attr("data-permission"));if(l){if(b.permission_vip_cannot(y)){(w>r)&&p++;continue}}else{if(b.permission_noVip_cannot(y)){(w>r)&&p++;if(b.permission_noVip_cannot_upCan(y)){o++;continue}continue}}var s=z.attr("data-data");q.push(s);if(k){k=false;j=r}}if(x){if(!q.length){if(o){lhx.dialog.confirm.show(n?config.msg.needSubscribe_album:config.msg.needSubscribe_playlist,function(){},function(){lhx.openBp.toAppStoreAndGooglePlay()});return"F"}else{lhx.dialog.toast.show(config.msg.notAvailable,false,false)}}m.eq(j).addClass("current");this.playItemIndex_set(0)}else{u.addClass("current");this.playItemIndex_set(w-p)}this.songList_set(q);this.createSongListUI()},playWithIndex:function(j,k){this.update_UIMsg();this.tryPlay(j,k)},playNext:function(){this.playItemIndex_set(this.limitIndex(++this.playItemIndex));this.playWithIndex()},playPrev:function(){this.playItemIndex_set(this.limitIndex(--this.playItemIndex));this.playWithIndex()},errorMaxNext:0,nextSongInMode:function(){var j=this.songList.length;switch(this.playMode){case 1:this.playItemIndex=lhx.rand(0,j-1);break;case 2:if(++this.playItemIndex>=j){this.playItemIndex_set(j-1);this.init_rail();this.pause();b.currentTime=0;b.setCurrentTime();return true}break;case 3:b.currentTime=0;i.logPlayStop();i.playTime_reset();break;case 0:default:this.playItemIndex_set(this.limitIndex(++this.playItemIndex));break}this.playWithIndex(true)},nextSongInMode_nextBtn:function(){var j=this.songList.length;if(this.playMode===1){this.playItemIndex=lhx.rand(0,j-1)}else{this.playItemIndex_set(this.limitIndex(++this.playItemIndex))}this.playWithIndex()},prevSongInMode_prevBtn:function(){var j=this.songList.length;if(this.playMode===1){this.playItemIndex=lhx.rand(0,j-1)}else{this.playItemIndex_set(this.limitIndex(--this.playItemIndex))}this.playWithIndex()},limitIndex:function(j){if(j<0){return this.songList.length-1}return Math.abs(j)%this.songList.length},currentMsg:[],parseMsg:function(k){if(!k){return{}}k=decodeURIComponent(k);var j=k.split("@+#");return{id:j[0],colType:j[1],colID:j[2],cover:j[3],name:j[4],artist:j[5],artistId:j[6],duration:lhx.minuteSecondToTimestamp(j[7]),rcmdEngine:j[8],rcmdEngineVersion:j[9]}},currentSongData:null,encryptToPlay:function(j){if(lhx.openBp.isChrome){this.encryptToPlay_can(j)}else{this.encryptToPlay_cannot(j)}},encryptToPlay_can:function(l){var k=this;if(!this.currentSongData){this.setCurrentTime();return}var j=e.URL.createObjectURL(this.currentSongData);c.src=j;setTimeout(function(){k.setCurrentTime();if(l||!k.isPaused){k.play()}},1);setTimeout(function(){e.URL.revokeObjectURL(j)},800)},encryptToPlay_cannotTimeID:null,encryptToPlay_cannot:function(k){if(k){c.src=e.URL.createObjectURL(this.currentSongData);var j=this;clearTimeout(this.encryptToPlay_cannotTimeID);this.encryptToPlay_cannotTimeID=setTimeout(function(){j.setCurrentTime();j.play()},200)}else{this.setCurrentTime()}},update_UIMsg:function(){this.currentMsg=this.parseMsg(this.songList[this.playItemIndex]);this.currentTime=0;var n=this.currentMsg;var k=this.$audioInfo.find(".img");var j=this.$audioInfo.find(".default");var l=this.$audioInfo.find(".songName");var m=this.$audioInfo.find(".singerName");this.duration=n.duration;this.$audio_duration.text(lhx.formatMinuteSecond(n.duration));if(n.cover){k.css("background-image","url('"+n.cover+"')")}else{k.css("background-image","none")}l.text(n.name||"").attr("href",l.attr("data-srcPrefix")+(n.id||0));m.text(n.artist||"").attr("href",m.attr("data-srcPrefix")+(n.artistId||0));if(n.colType==="1"){j.removeClass("default_album").addClass("default_playlist")}else{j.removeClass("default_playlist").addClass("default_album")}var o=$(".audioOperation_favorite");o.attr("data-itemID",n.id);lhx.favouritesPage.isInFavourite(o,"musics",n.id);$(".audioOperation_addPlaylist").attr("data-id",n.id)},currentAjax:null,xhr:null,abortNet:function(){if(this.currentAjax){this.currentAjax.abort();this.currentAjax=null}if(this.xhr){this.xhr.abort();this.xhr=null}this.clearErrorTimeId()},errorTimeId:null,clearErrorTimeId:function(){this.errorTimeId&&clearTimeout(this.errorTimeId);this.errorTimeId=null},playInNet:function(){var k=this;i.logPlayStop();k.currentId=k.currentMsg.id;k.rcmdEngine=k.currentMsg.rcmdEngine;k.rcmdEngineVersion=k.currentMsg.rcmdEngineVersion;k.colID=k.currentMsg.colID;if(k.canPlayingId&&k.canPlayingId===k.currentId){i.playTime_reset();k.encryptToPlay(true);return}var j={itemID:k.currentId,itemType:"MUSIC"};this.currentSongData=null;this.canPlayingId=0;this.currentAjax=$.ajax({type:"post",url:config.request.source,data:j,dataType:"json",beforeSend:function(l){l.setRequestHeader("X-Boomplay-Ref",lhx.getLastToken())},success:function(l){var m=l.source;if(m){k.xhr=lhx.getBlob({url:m,success:function(n){i.playTime_reset();k.currentSongData=n;k.canPlayingId=k.currentId;k.encryptToPlay(true)},error:function(n){i.playTime_reset();if(n.statusText==="abort"){return}lhx.dialog.toast.show(config.error.network);b.pause()}});return}if(l.code==="2005"){lhx.dialog.confirm.show(config.msg.playSong.kickText,function(){lhx.login.autoLoginCan()},function(){lhx.login.autoLogin($(".autoLogin_event"))},config.msg.playSong.autoLoginBtn_cancel,config.msg.playSong.autoLoginBtn,function(){lhx.login.autoLoginCan()});i.playTime_reset();b.pause();return}else{if(l.code==="2030"){lhx.dialog.recaptcha.show(function(){i.playTime_reset();b.status_loading();b.playInNet();lhx.dialog.recaptcha.close()})}}lhx.dialog.toast.show(l.desc);i.playTime_reset();b.pause()},error:function(l){if(l.statusText==="abort"){return}if(l.readyState!==4){k.errorTimeId=setTimeout(function(){i.playTime_reset();b.playInNet()},3000)}else{lhx.dialog.toast.show(config.error.network);i.playTime_reset();b.pause()}}})},status_change_withClass:function(j){var k=$(j+"[data-id="+this.currentMsg.id+"]");k.addClass("current");if(this.isPaused){$(j+".loadingOrPlaying").removeClass("loadingOrPlaying")}else{k.addClass("loadingOrPlaying")}},positionToWithId:function(){var k=$(".songList ol");var l=k.find("li[data-id="+this.currentMsg.id+"]");if(l.length){var j=k.scrollTop()+l.position().top-k.height()/2+40;k.stop().animate({scrollTop:j+"px"},600)}},playOneStatus_change:function(){this.playOneStatus_clear();this.status_change_withClass(".play_one");this.status_change_withClass(".songList ol li");this.positionToWithId()},playOneStatus_clear:function(){$(".play_one").removeClass("current loadingOrPlaying");$(".songList li").removeClass("current loadingOrPlaying")},deleteSong:function(k){var j=$(".songList li").index(k);this.songList.splice(j,1);this.songList_put();this.createSongListUI();if(this.playItemIndex===j){if(k.attr("data-id")===this.currentMsg.id){if(this.isPaused){this.update_UIMsg();this.playOneStatus_change()}else{if(this.playItemIndex===j){this.playItemIndex_set(this.limitIndex(--this.playItemIndex))}if(this.songList.length){this.playNext()}else{this.stopSongAndNet();this.update_UIMsg()}}}return}if(this.playItemIndex>j){this.playItemIndex_set(this.limitIndex(--this.playItemIndex))}this.playOneStatus_change()},checkFetchStatus:function(j){if(j.status>=200&&j.status<300){return j}else{var k=new Error(j.statusText);k.response=j;throw k}},lyrics:{controller:null,signal:null,getSrc:function(){return $(".lyrics").attr("data-src")},lyrics_ajax:null,abort:function(){if(this.lyrics_ajax){this.lyrics_ajax.abort();this.lyrics_ajax=null}},getData:function(){var j=this;var k=j.getSrc();if($.trim(k)===""){this.noData();return}this.abort();this.lyrics_ajax=$.ajax({type:"GET",url:k,data:"",success:function(o){var l=0;var q="";var m="";var n=0;o=$.trim(o).replace(/([\s\S]*?)(\[(\d{1,2}\:\d{1,2}\.\d{1,2})\])/ig,function(v,s,w,u,t){if(!t){q=u;return""}if(++l>config.constant.maxLine){m='class="hidden"'}var r="<div "+m+' data-time="'+q+'">'+s+"</div>";q=u;n=r;return r});var p=o.split(n);if(p.length===2){o=p[0]+n+"<div "+m+' data-time="'+q+'">'+p[1]+"</div>"}if($.trim(o)){$(".lyrics").html(o);if(l>config.constant.maxLine){$(".lyrics_more").removeClass("hidden")}}else{j.noData()}},error:function(){j.noData()}})},noData:function(){$(".lyrics").html("<div>No lyrics yet</div>")},showMore:function(){$(".lyrics .hidden").removeClass("hidden");$(".lyrics_more").addClass("hidden")}}};h.addHandler(c,"playing",function(){b.status_playing()});h.addHandler(c,"ended",function(){b.isEnded=true;b.nextSongInMode()});h.addHandler(c,"timeupdate",function(){i.askIsMore30()});h.addHandler(c,"pause",function(){if(b.isInPlaying){b.pause()}});h.addHandler(c,"durationchange",function(){if(b.currentId===b.canPlayingId){b.duration=c.duration}});h.addHandler(c,"error",function(){console.log("error");i.playTime_reset();b.pause()});$(document).on({click:function(){var j=$(this);if($(this).hasClass("status_loading")||j.hasClass("status_playing")){b.abortNet();b.isPaused=true;b.pause()}else{b.tryPlay(false,true)}}},".audioUtils_btn_play");$(document).on({click:function(){b.playOne($(this))}},".play_one");$(document).on({click:function(){b.playAll($(this))}},".play_all");$(document).on({click:function(){b.playItemIndex_set($(".songList li").index($(this)));b.playWithIndex()}},".songList li");$(document).on({click:function(){b.nextSongInMode_nextBtn()}},".audio_nextBtn");$(document).on({click:function(){b.prevSongInMode_prevBtn()}},".audio_prevBtn");$(document).on({mousedown:function(j){j.stopPropagation();j.preventDefault();b.mouseDown(j.clientX)}},".audioRail");$(document).on({mousedown:function(j){j.stopPropagation();j.preventDefault();b.dragstart()}},".audioRail_dot");$(document).on({mousemove:function(j){b.dragging(j.clientX)},mouseup:function(j){b.dragend(j.clientX)}});$(document).on({mouseover:function(j){b.dragend()}},"iframe");$(document).on({click:function(){b.playMode_set(++b.playMode%4);b.playModeUI_change()}},".audioOperation_playMode");$(document).on({click:function(){$(".songList").toggleClass("show");b.positionToWithId();if($(".songList").hasClass("show")){lhx.logUtils.newLog("ACT","VISIT","DET_PLAYER_PLAYLIST_VISIT")}}},".audioOperation_songList");$(document).on({click:function(){$(".songList").removeClass("show")}},".songList .close,.songList ol a");$(document).on({click:function(j){if($(j.target).closest(".audioOperation_songList").length){return}if(!$(j.target).closest(".songList").length){$(".songList").removeClass("show")}}});$(document).on({click:function(j){j.stopPropagation();b.deleteSong($(this).parents("li"))}},".songList .deleteSong");h.addHandler(e,"storage",function(j){if(j.key===d.isPlaying&&!b.isPaused&&parseInt(b.isPlaying_get())!==d.storageTime){b.pause()}});$(document).on({click:function(){b.footer_min()}},".audio_retract");$(document).on({click:function(){lhx.audioUtils.lyrics.showMore()}},".lyrics_wrap .lyrics_more");$(document).on({click:function(j){j.stopPropagation();lhx.dialog.download.show(config.msg.download)}},".download_event");$(document).on({click:function(j){j.stopPropagation();lhx.comment.positionToComment()}},".comment_event")})(window);var banner={curIndex:0,liLen:0,$li:null,$banner_pointer:null,$banner_left:null,$banner_right:null,init:function(){this.$banner_left=$(".banner_left");this.$banner_right=$(".banner_right");this.$li=$(".banner li");this.liLen=this.$li.length;this.createPointer();this.change(this.curIndex);this.run()},createPointer:function(){var c="";for(var b=0,a=this.liLen;b<a;b++){if(b===this.curIndex){c+="<span class='current'></span>"}else{c+="<span></span>"}}this.$banner_pointer=$(".banner_pointer").html(c)},run:function(){var a=this;this.stop();this.interId=setInterval(function(){a.change(++a.curIndex)},config.constant.bannerIntervalTime)},stop:function(){this.interId&&clearInterval(this.interId)},showControl:function(){if(!this.$banner_left){return}this.stop();this.$banner_left.addClass("current");this.$banner_right.addClass("current")},hiddenControl:function(){if(!this.$banner_left){return}this.run();this.$banner_left.removeClass("current");this.$banner_right.removeClass("current")},limit:function(a){return a%this.liLen},change:function(a){var c=this.$li;var b=this.curIndex=this.limit(a)||0;this.clearAll(c);c.eq(b).addClass("current");if(this.liLen>3){c.eq(this.limit(b+1)).addClass("second");c.eq(this.limit(b+2)).addClass("third")}else{c.eq(this.limit(b+1)).addClass("third")}this.$banner_pointer.find("span").eq(b).addClass("current")},clearAll:function(){var a=this.$li;a.removeClass("current");a.removeClass("second");a.removeClass("third");this.$banner_pointer.find("span").removeClass("current")}};$(document).on({click:function(){banner.change(++banner.curIndex)}},".banner_right");$(document).on({click:function(){banner.change(--banner.curIndex)}},".banner_left");$(document).on({mouseenter:function(){banner.showControl()},mouseleave:function(){banner.hiddenControl()}},".banner");var column={width:0,totalWidth:0,left:config.constant.columnMaxLeft,$column_slide:null,$column_left:null,$column_right:null,$ul:null,initAll:function(){var c=$(".column_right");for(var b=0,a=c.length;b<a;b++){column.init(c.eq(b));column.change(0);this.isLess()}},init:function(a){this.$column_slide=a.parents(".column_slide");this.$ul=this.$column_slide.find("ul");var b=this.$ul.find("li");this.width=this.$column_slide.width();this.totalWidth=b.length*b.outerWidth();this.$column_left=this.$column_slide.find(".column_left");this.$column_right=this.$column_slide.find(".column_right")},change:function(b){var c=parseFloat(this.$ul.css("left"));var a=c+b;if(this.isLess()){return}this.showArrow();if(a>=config.constant.columnMaxLeft){a=config.constant.columnMaxLeft;this.$column_left.removeClass("current")}else{if(a<=this.width-this.totalWidth){a=this.width-this.totalWidth;this.$column_right.removeClass("current")}}this.$ul.css({left:a+"px"})},isLess:function(){if(this.totalWidth<=this.width-10){this.removeArrow();this.$ul.css({left:config.constant.columnMaxLeft+"px"});return true}},showArrow:function(){this.$column_left.addClass("current");this.$column_right.addClass("current")},removeArrow:function(){this.$column_left.removeClass("current");this.$column_right.removeClass("current")}};$(document).on({click:function(){var a=$(this);column.init(a);column.change(-column.width)}},".column_right");$(document).on({click:function(){var a=$(this);column.init(a);column.change(column.width)}},".column_left");$(window).on({resize:function(){column.initAll()}});$(document).on({click:function(){var f=$(this);f.parents("li").find("span").removeClass("current");f.addClass("current");var e={};var c=$(".artistsCriteria li");for(var d=0,a=c.length;d<a;d++){var g=c.eq(d);e[g.attr("data-field")]=g.find("span.current").attr("data-value")}var b=f.parents(".artistsCriteria");lhx.pajax.getData_fromPart(b.attr("data-src").lmx_addURLParamBatch(e),b.attr("data-partTo"))}},".artistsCriteria span");$(document).on({click:function(){var a=$(this);a.parents(".playlistCriteria").find("a").removeClass("current");a.addClass("current")}},".playlistCriteria a");var sideBarNav={clear:function(){$(".nav a").removeClass("current");return this},addCurrent:function(a){this.clear();a.addClass("current");return this},pajax_initNav:function(a){this.addCurrent($(".nav ."+a))},initNav:function(){this.addCurrent($(".nav ."+$(".pageContent").attr("data-nav")))}};sideBarNav.initNav();lhx.scrollChange=function(){$("main.scrollView").on({scroll:function(){var a=$(".header.opacity");if(!a.length){return}var b=$(this).scrollTop();if(b<30){a.removeClass("scrollBlack");return}a.addClass("scrollBlack")}})};$(document).on({click:function(){sideBarNav.addCurrent($(this))}},".nav a");$(document).on({click:function(){if(history.state&&history.state.first){history.pushState({href:"/home"},"","/home");lhx.pajax.getData("/home")}else{history.back()}}},".back_btn");$(document).on({click:function(){history.forward()}},".forward_btn");var pageNav={curPage:0,total:0,initAll:function(){var b=$(".pageNav");for(var c=0,a=b.length;c<a;c++){var d=b.eq(c);this.curPage=parseInt(d.attr("data-curPage"));this.init(d);this.create();this.change(this.curPage)}},init:function(a){this.$pageNav=a;this.$pageNav_content=a.find(".pageNav_content");this.$pageNav_total=this.$pageNav.find(".pageNav_total strong");this.total=parseInt(this.$pageNav_total.text());this.$pageNav_pre=a.find(".pageNav_pre");this.$pageNav_next=a.find(".pageNav_next")},create:function(){if(this.total<8){this.createLess()}else{this.createMore()}},change:function(a){this.curPage=a;this.$pageNav.attr("data-curPage",a);this.$pageNav_pre.addClass("noneClick");this.$pageNav_next.addClass("noneClick");if(this.curPage>1){this.$pageNav_pre.removeClass("noneClick")}if(this.curPage<this.total){this.$pageNav_next.removeClass("noneClick")}if(this.total<8){this.$pageNav_content.find("a").removeClass("current").eq(this.curPage-1).addClass("current")}else{this.createMore()}},createLess:function(){var d="";var e=this.$pageNav.attr("data-href");for(var c=1,a=this.total;c<=a;c++){var b="";if(this.curPage===c){b='class="current"'}d+="<a "+b+' href="'+this.getLastHref(e,c)+'">'+c+"</a>"}this.$pageNav_content.html(d)},setCurrentClass:function(a){if(this.curPage!==a){return""}return' class="current"'},getCenterHtml:function(e,a,d){var c="";for(var b=e;b<=a;b++){c+="<a "+this.setCurrentClass(b)+' href="'+this.getLastHref(d,b)+'">'+b+"</a>"}return c},getLastHref:function(b,a){return b?b.lmx_addURLParamBatch({page:a}):"javascript:;"},createMore:function(){var a="";var b=this.$pageNav.attr("data-href");if(this.curPage<5){a+=this.getCenterHtml(1,5,b);a+='<span class="ellipsis">...</span><a href="'+this.getLastHref(b,this.total)+'">'+this.total+"</a>"}else{if(this.curPage>=5&&this.curPage<=this.total-5){a+='<a href="'+this.getLastHref(b,1)+'">1</a><span class="ellipsis">...</span>';a+=this.getCenterHtml(this.curPage-2,this.curPage+2,b);a+='<span class="ellipsis">...</span><a href="'+b+'">'+this.total+"</a>"}else{a+='<a href="'+this.getLastHref(b,1)+'">1</a><span class="ellipsis">...</span>';a+=this.getCenterHtml(this.total-5,this.total,b)}}this.$pageNav_content.html(a)}};$(document).on({click:function(){pageNav.init($(this).parents(".pageNav"));pageNav.change(parseInt($(this).text()))}},".pageNav_content a");$(document).on({click:function(){var a=$(this).parents(".pageNav");pageNav.init(a);pageNav.change(parseInt(a.attr("data-curPage"))-1);pageNav.$pageNav_content.find("a.current").click()}},".pageNav_pre:not(.noneClick)");$(document).on({click:function(){var a=$(this).parents(".pageNav");pageNav.init(a);pageNav.change(parseInt(a.attr("data-curPage"))+1);pageNav.$pageNav_content.find("a.current").click()}},".pageNav_next:not(.noneClick)");if(typeof document.msHidden!="undefined"){var $bg=$(".gaussianWrap");var src=$bg.find(".gaussian").attr("data-image");var svg='<svg xmlns="http://www.w3.org/2000/svg"         xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%">        <filter id="blur">            <feGaussianBlur in="SourceGraphic" stdDeviation="30" />        </filter>        <image filter="url(#blur)" x="0" y="0" width="100%" height="100%" xlink:href="'+src+'" alt=""               preserveAspectRatio="none"/>    </svg><i></i>';$bg.html(svg)}var headerOpacity={opacity:function(){$(".header").addClass("opacity");$(".main").addClass("headerIsOpacity")},nonOpacity:function(){$(".header").removeClass("opacity");$(".main").removeClass("headerIsOpacity")}};var pageJS={init:function(b){column.initAll();pageNav.initAll();lhx.audioUtils.playOneStatus_change();if($("#recaptchaID").length){recaptchaOnload()}switch(b){case"home":banner.init();headerOpacity.nonOpacity();lhx.logUtils.newLog("ACT","VISIT","MH_MUSIC_VISIT");return;case"charts":headerOpacity.nonOpacity();lhx.logUtils.newLog("ACT","VISIT","MH_MUSIC_ICON_CHARTS_VISIT");return;case"playlists":headerOpacity.nonOpacity();lhx.logUtils.newLog("ACT","VISIT","MH_MUSIC_ICON_PLAYLISTS_VISIT");return;case"artists":headerOpacity.nonOpacity();lhx.logUtils.newLog("ACT","VISIT","MH_MUSIC_ICON_ARTISTS_VISIT");return;case"genres":headerOpacity.nonOpacity();lhx.logUtils.newLog("ACT","VISIT","MH_MUSIC_ICON_GENRES_VISIT");return;case"genresDetails":headerOpacity.opacity();var c=$(".genresTitle").text();if(c){c=c.toUpperCase().replace(/\s/ig,"")}var d=lhx.pajax.getLastUrl(location.pathname);var a;if(d){a={categoryID:d}}lhx.logUtils.newLog("GENRE","VISIT","MH_MUSIC_ICON_GENRES_GENRE_"+c+"_VISIT",a);return;case"genresDetailsMore":var c=$(".categoryName").val();if(c){c=c.toUpperCase().replace(/\s/ig,"")}var e=$(".categoryName_title").text();if(e){e=e.toUpperCase()}lhx.logUtils.newLog("ACT","VISIT","MH_MUSIC_ICON_GENRES_GENRE_"+c+"_CAT_"+e+"_MORE_VISIT");return;case"playlistsDetails":headerOpacity.opacity();lhx.favouritesPage.initLoveStatus();lhx.comment.initTime();lhx.comment.initCommentContent();lhx.readMore.init();return;case"albumsDetails":headerOpacity.opacity();lhx.favouritesPage.initLoveStatus();lhx.comment.initTime();lhx.comment.initCommentContent();lhx.readMore.init();return;case"artistsDetails":headerOpacity.opacity();lhx.favouritesPage.initLoveStatus();lhx.comment.initTime();lhx.comment.initCommentContent();lhx.readMore.init();return;case"artistsDetailsMore":headerOpacity.nonOpacity();return;case"searchDetails":headerOpacity.opacity();lhx.search.init();lhx.comment.initTime();lhx.buzz.sliderTo();lhx.logUtils.newLog("ACT","VISIT","SEARCH_VISIT");return;case"noLogIn":headerOpacity.opacity();return;case"myPlaylists":headerOpacity.nonOpacity();lhx.myPlaylists.update();lhx.myPlaylists.addToPlaylist.isCreate=false;lhx.logUtils.newLog("ACT","VISIT","LIB_ICON_PLAYLISTS_VISIT");return;case"favourites":headerOpacity.nonOpacity();lhx.favouritesPage.update();this.logVisit_favourites();return;case"songsDetails":headerOpacity.opacity();lhx.favouritesPage.initLoveStatus();lhx.audioUtils.lyrics.getData();lhx.comment.initTime();lhx.comment.initCommentContent();return;case"buzzRecommended":headerOpacity.nonOpacity();lhx.comment.initTime();lhx.logUtils.newLog("ACT","VISIT","BZ_TAB_RECOMMENDED_VISIT");return;case"buzzDetails":headerOpacity.opacity();lhx.comment.initTime();lhx.comment.initCommentContent();lhx.comment.positionTo();lhx.buzz.initBuzzContent();return;case"profileEdit":lhx.profileEdit.birthday.init();return;case"homeMore":this.logVisit_more();return}},logVisit_more:function(){var e=location.href.lmx_parseToObjWithURL();var d=$("#colGrpID").val();var b=e.name;if(b){b=b.toUpperCase().replace(/\s|\+/ig,"")}var a;if(d){a={colGrpID:d}}var c=lhx.pajax.getLastUrl(location.pathname);if(c==="home"){lhx.logUtils.newLog("GROUP","VISIT","MH_MUSIC_CAT_"+b+"_MORE_VISIT",a)}else{if(c==="charts"){lhx.logUtils.newLog("GROUP","VISIT","MH_MUSIC_ICON_CHARTS_CAT_"+b+"_MORE_VISIT",a)}}},logVisit_favourites:function(){var a=location.href.lmx_parseToObjWithURL();var b=a.type;if(b==="albums"){lhx.logUtils.newLog("ACT","VISIT","LIB_ICON_FAVOURITES_TAB_ALBUMS_VISIT")}else{if(b==="artists"){lhx.logUtils.newLog("ACT","VISIT","LIB_ICON_FAVOURITES_TAB_ARTISTS_VISIT")}else{if(b==="playlists"){lhx.logUtils.newLog("ACT","VISIT","LIB_ICON_FAVOURITES_TAB_PLAYLISTS_VISIT")}else{lhx.logUtils.newLog("ACT","VISIT","LIB_ICON_FAVOURITES_TAB_SONGS_VISIT")}}}},destroy:function(a){if(lhx.share.isOpen){lhx.share.close()}switch(a){case"home":banner.stop();return;default:return}}};$(document).on({click:function(){var d=$(this);var a;var b=d.attr("data-colGrpID");if(b){a={colGrpID:b}}var c=d.attr("data-categoryID");if(c){a={categoryID:c}}lhx.logUtils.newLog(d.attr("data-evtCat"),"CLICK",d.attr("data-evtID").toUpperCase().replace(/\s/ig,""),a)}},".log_clickEvent");var more={loading:function(b){if(b.hasClass("loading")||b.hasClass("end")){return true}b.html("").addClass("loading");var a=b.attr("data-isJSON");if(a){this[a](b)}else{this.getData(b)}return false},loaded:function(a){a.removeClass("loading").html(a.attr("data-value"))},end:function(a){a.removeClass("loading").addClass("end").html(a.attr("data-end"))},setContentAndPositionTo:function(e,b,a){var c=$(".main");var d=c.scrollTop();if(a){$(".comment.hidden").removeClass("hidden")}$(e).append(b);c.animate({scrollTop:d+"px"},0)},getData:function(f){var e=this;var c={};var g=f.attr("data-key");var h=f.attr("data-partTo");if(g){g=g.split("|||");var b=f.attr("data-keyVal").split("|||");for(var d=0,a=g.length;d<a;d++){c[g[d]]=b[d]}}lhx.pajax.currentAjax=$.ajax({type:"GET",url:f.attr("data-formSrc"),data:c,success:function(l){var i=$(document.createElement("div"));i.html(l);var n=i.find(h);var k=n.html();if(lhx.login.isLoginUI()){if(i.find(".userInfo .logout_info").length){lhx.login.loginOut()}else{if(i.find(".userInfo .autoLogin_info").length){lhx.login.autoLoginCan()}}}var m="li";var j=f.attr("data-realPageSizeEle");if(j){m=j}if($.trim(k)===""||n.find(m).length<parseInt(f.attr("data-pageSize"))){more.end(f)}else{more.loaded(f)}e.setContentAndPositionTo(h,k);if(f.attr("data-needParseTime")){lhx.comment.initTime()}if("page" in c){f.attr("data-keyVal",parseInt(c.page)+1)}else{f.attr("data-keyVal",parseInt(c[f.attr("data-pageCountName")])+1)}},error:function(){more.loaded(f);lhx.dialog.toast.show(config.error.network,true,true)}})},getComments:function(f){var e=this;var c={};var g=f.attr("data-key");var h=f.attr("data-partTo");if(g){g=g.split("|||");var b=f.attr("data-keyVal").split("|||");for(var d=0,a=g.length;d<a;d++){c[g[d]]=b[d]}}$.ajax({type:"POST",url:f.attr("data-formSrc"),dataType:"json",data:JSON.stringify(c),contentType:"application/json;charset=utf-8",success:function(l){if(l.code==="success"){var k=null;var i=f.hasClass("isHot");if(i){k=l.resultData.hotComments||[]}else{k=l.resultData.comments||[]}var j=lhx.comment.more(k);e.setContentAndPositionTo(h,j,i);b[0]=parseInt(b[0])+1;f.attr("data-keyVal",b.join("|||"));if(k.length<parseInt(f.attr("data-pageSize"))){more.end(f)}else{more.loaded(f)}lhx.comment.initCollapse()}else{if(l.code==="2030"){lhx.dialog.recaptcha.show(function(){f.click();lhx.dialog.recaptcha.close()})}more.loaded(f);lhx.dialog.toast.show(l.desc,true,true)}},error:function(){more.loaded(f);lhx.dialog.toast.show(config.error.network,true,true)}})}};$(document).on({click:function(){var a=$(this);more.loading(a)}},".moreBtn");(function(){var countryModel=lhx.contryModel={hotCountryJson:[{cn:"Nigeria",pcc:"234",cc:"NG"},{cn:"Kenya",pcc:"254",cc:"KE"},{cn:"Tanzania",pcc:"255",cc:"TZ"},{cn:"Ghana",pcc:"233",cc:"GH"},{cn:"Zambia",pcc:"260",cc:"ZM"},{cn:"Uganda",pcc:"256",cc:"UG"},{cn:"Rwanda",pcc:"250",cc:"RW"},{cn:"Senegal",pcc:"221",cc:"SN"},{cn:"Cameroon",pcc:"237",cc:"CM"},{cn:"Cote d'Ivoire",pcc:"225",cc:"CI"}],countryJSON:[{cn:"Afghanistan",pcc:"93",cc:"AF"},{cn:"Albania",pcc:"355",cc:"AL"},{cn:"Algeria",pcc:"213",cc:"DZ"},{cn:"America",pcc:"1",cc:"US"},{cn:"Andorra",pcc:"376",cc:"AD"},{cn:"Angola",pcc:"244",cc:"AO"},{cn:"Anguilla",pcc:"1264",cc:"AI"},{cn:"Antigua and Barbuda",pcc:"1268",cc:"AG"},{cn:"Argentina",pcc:"54",cc:"AR"},{cn:"Armenia",pcc:"374",cc:"AM"},{cn:"Australia",pcc:"61",cc:"AU"},{cn:"Austria",pcc:"43",cc:"AT"},{cn:"Azerbaijan",pcc:"994",cc:"AZ"},{cn:"Bahamas",pcc:"1242",cc:"BS"},{cn:"Bahrain",pcc:"973",cc:"BH"},{cn:"Bangladesh",pcc:"880",cc:"BD"},{cn:"Barbados",pcc:"1246",cc:"BB"},{cn:"Belarus",pcc:"375",cc:"BY"},{cn:"Belgium",pcc:"32",cc:"BE"},{cn:"Belize",pcc:"501",cc:"BZ"},{cn:"Benin",pcc:"229",cc:"BJ"},{cn:"Bermuda Is.",pcc:"1441",cc:"BM"},{cn:"Bolivia",pcc:"591",cc:"BO"},{cn:"Botswana",pcc:"267",cc:"BW"},{cn:"Brazil",pcc:"55",cc:"BR"},{cn:"Brunei",pcc:"673",cc:"BN"},{cn:"Bulgaria",pcc:"359",cc:"BG"},{cn:"Burkina-faso",pcc:"226",cc:"BF"},{cn:"Burma",pcc:"95",cc:"MM"},{cn:"Burundi",pcc:"257",cc:"BI"},{cn:"Cameroon",pcc:"237",cc:"CM"},{cn:"Canada",pcc:"1",cc:"CA"},{cn:"Central African Republic",pcc:"236",cc:"CF"},{cn:"Chad",pcc:"235",cc:"TD"},{cn:"Chile",pcc:"56",cc:"CL"},{cn:"China",pcc:"86",cc:"CN"},{cn:"Colombia",pcc:"57",cc:"CO"},{cn:"Congo Brazzaville",pcc:"242",cc:"CG"},{cn:"Cook Is.",pcc:"682",cc:"CK"},{cn:"Costa Rica",pcc:"506",cc:"CR"},{cn:"Cote d'Ivoire",pcc:"225",cc:"CI"},{cn:"Cuba",pcc:"53",cc:"CU"},{cn:"Cyprus",pcc:"357",cc:"CY"},{cn:"Czech Republic",pcc:"420",cc:"CZ"},{cn:"Denmark",pcc:"45",cc:"DK"},{cn:"Djibouti",pcc:"253",cc:"DJ"},{cn:"Dominica Republic",pcc:"1890",cc:"DO"},{cn:"DR Congo",pcc:"243",cc:"ZR"},{cn:"EI Salvador",pcc:"503",cc:"SV"},{cn:"Ecuador",pcc:"593",cc:"EC"},{cn:"Egypt",pcc:"20",cc:"EG"},{cn:"Estonia",pcc:"372",cc:"EE"},{cn:"Ethiopia",pcc:"251",cc:"ET"},{cn:"Fiji",pcc:"679",cc:"FJ"},{cn:"Finland",pcc:"358",cc:"FI"},{cn:"France",pcc:"33",cc:"FR"},{cn:"French Guiana",pcc:"594",cc:"GF"},{cn:"French Polynesia",pcc:"689",cc:"PF"},{cn:"Gabon",pcc:"241",cc:"GA"},{cn:"Gambia",pcc:"220",cc:"GM"},{cn:"Georgia",pcc:"995",cc:"GE"},{cn:"Germany",pcc:"49",cc:"DE"},{cn:"Ghana",pcc:"233",cc:"GH"},{cn:"Gibraltar",pcc:"350",cc:"GI"},{cn:"Greece",pcc:"30",cc:"GR"},{cn:"Grenada",pcc:"1473",cc:"GD"},{cn:"Guam",pcc:"1671",cc:"GU"},{cn:"Guatemala",pcc:"502",cc:"GT"},{cn:"Guinea",pcc:"224",cc:"GN"},{cn:"Guyana",pcc:"592",cc:"GY"},{cn:"Guinea bissau",pcc:"245",cc:"GW"},{cn:"Haiti",pcc:"509",cc:"HT"},{cn:"Honduras",pcc:"504",cc:"HN"},{cn:"Hong Kong (SAR China)",pcc:"852",cc:"HK"},{cn:"Hungary",pcc:"36",cc:"HU"},{cn:"Iceland",pcc:"354",cc:"IS"},{cn:"India",pcc:"91",cc:"IN"},{cn:"Indonesia",pcc:"62",cc:"ID"},{cn:"Iran",pcc:"98",cc:"IR"},{cn:"Iraq",pcc:"964",cc:"IQ"},{cn:"Ireland",pcc:"353",cc:"IE"},{cn:"Israel",pcc:"972",cc:"IL"},{cn:"Italy",pcc:"39",cc:"IT"},{cn:"Jamaica",pcc:"1876",cc:"JM"},{cn:"Japan",pcc:"81",cc:"JP"},{cn:"Jordan",pcc:"962",cc:"JO"},{cn:"Kampuchea",pcc:"855",cc:"KH"},{cn:"Kazakstan",pcc:"7",cc:"KZ"},{cn:"Kenya",pcc:"254",cc:"KE"},{cn:"Korea",pcc:"82",cc:"KR"},{cn:"Kuwait",pcc:"965",cc:"KW"},{cn:"Kyrgyzstan",pcc:"996",cc:"KG"},{cn:"Laos",pcc:"856",cc:"LA"},{cn:"Latvia",pcc:"371",cc:"LV"},{cn:"Lebanon",pcc:"961",cc:"LB"},{cn:"Lesotho",pcc:"266",cc:"LS"},{cn:"Liberia",pcc:"231",cc:"LR"},{cn:"Libya",pcc:"218",cc:"LY"},{cn:"Liechtenstein",pcc:"423",cc:"LI"},{cn:"Lithuania",pcc:"370",cc:"LT"},{cn:"Luxembourg",pcc:"352",cc:"LU"},{cn:"Madagascar",pcc:"261",cc:"MG"},{cn:"Macau (SAR China)",pcc:"853",cc:"MO"},{cn:"Malawi",pcc:"265",cc:"MW"},{cn:"Malaysia",pcc:"60",cc:"MY"},{cn:"Maldives",pcc:"960",cc:"MV"},{cn:"Mali",pcc:"223",cc:"ML"},{cn:"Malta",pcc:"356",cc:"MT"},{cn:"Mauritania",pcc:"222",cc:"MR"},{cn:"Mauritius",pcc:"230",cc:"MU"},{cn:"Mexico",pcc:"52",cc:"MX"},{cn:"Moldova",pcc:"373",cc:"MD"},{cn:"Monaco",pcc:"377",cc:"MC"},{cn:"Mongolia",pcc:"976",cc:"MN"},{cn:"Montserrat Is",pcc:"1664",cc:"MS"},{cn:"Morocco",pcc:"212",cc:"MA"},{cn:"Mozambique",pcc:"258",cc:"MZ"},{cn:"Namibia",pcc:"264",cc:"NA"},{cn:"Nauru",pcc:"674",cc:"NR"},{cn:"Nepal",pcc:"977",cc:"NP"},{cn:"Netherlands",pcc:"31",cc:"NL"},{cn:"New Zealand",pcc:"64",cc:"NZ"},{cn:"Nicaragua",pcc:"505",cc:"NI"},{cn:"Niger",pcc:"227",cc:"NE"},{cn:"Nigeria",pcc:"234",cc:"NG"},{cn:"North Korea",pcc:"850",cc:"KP"},{cn:"Norway",pcc:"47",cc:"NO"},{cn:"Oman",pcc:"968",cc:"OM"},{cn:"Pakistan",pcc:"92",cc:"PK"},{cn:"Palestine",pcc:"970",cc:"BL"},{cn:"Panama",pcc:"507",cc:"PA"},{cn:"Papua New Guinea",pcc:"675",cc:"PG"},{cn:"Paraguay",pcc:"595",cc:"PY"},{cn:"Peru",pcc:"51",cc:"PE"},{cn:"Philippines",pcc:"63",cc:"PH"},{cn:"Poland",pcc:"48",cc:"PL"},{cn:"Portugal",pcc:"351",cc:"PT"},{cn:"Puerto Rico",pcc:"1787",cc:"PR"},{cn:"Qatar",pcc:"974",cc:"QA"},{cn:"Romania",pcc:"40",cc:"RO"},{cn:"Russia",pcc:"7",cc:"RU"},{cn:"Rwanda",pcc:"250",cc:"RW"},{cn:"Saint Vincent",pcc:"1784",cc:"VC"},{cn:"San Marino",pcc:"378",cc:"SM"},{cn:"Sao Tome and Principe",pcc:"239",cc:"ST"},{cn:"Saudi Arabia",pcc:"966",cc:"SA"},{cn:"Senegal",pcc:"221",cc:"SN"},{cn:"Seychelles",pcc:"248",cc:"SC"},{cn:"Sierra Leone",pcc:"232",cc:"SL"},{cn:"Singapore",pcc:"65",cc:"SG"},{cn:"Slovakia",pcc:"421",cc:"SK"},{cn:"Slovenia",pcc:"386",cc:"SI"},{cn:"Solomon Is",pcc:"677",cc:"SB"},{cn:"Somali",pcc:"252",cc:"SO"},{cn:"South Africa",pcc:"27",cc:"ZA"},{cn:"South Sudan",pcc:"211",cc:"SS"},{cn:"Spain",pcc:"34",cc:"ES"},{cn:"Sri Lanka",pcc:"94",cc:"LK"},{cn:"St.Lucia",pcc:"1758",cc:"LC"},{cn:"Sudan",pcc:"249",cc:"SD"},{cn:"Suriname",pcc:"597",cc:"SR"},{cn:"Swaziland",pcc:"268",cc:"SZ"},{cn:"Sweden",pcc:"46",cc:"SE"},{cn:"Switzerland",pcc:"41",cc:"CH"},{cn:"Syria",pcc:"963",cc:"SY"},{cn:"Taiwan (China)",pcc:"886",cc:"TW"},{cn:"Tajikistan",pcc:"992",cc:"TJ"},{cn:"Tanzania",pcc:"255",cc:"TZ"},{cn:"Thailand",pcc:"66",cc:"TH"},{cn:"Togo",pcc:"228",cc:"TG"},{cn:"Tonga",pcc:"676",cc:"TO"},{cn:"Trinidad and Tobago",pcc:"1868",cc:"TT"},{cn:"Tunisia",pcc:"216",cc:"TN"},{cn:"Turkey",pcc:"90",cc:"TR"},{cn:"Turkmenistan",pcc:"993",cc:"TM"},{cn:"Uganda",pcc:"256",cc:"UG"},{cn:"Ukraine",pcc:"380",cc:"UA"},{cn:"United Arab Emirates",pcc:"971",cc:"AE"},{cn:"United Kingdom",pcc:"44",cc:"GB"},{cn:"Uruguay",pcc:"598",cc:"UY"},{cn:"Uzbekistan",pcc:"998",cc:"UZ"},{cn:"Venezuela",pcc:"58",cc:"VE"},{cn:"Vietnam",pcc:"84",cc:"VN"},{cn:"Yemen",pcc:"967",cc:"YE"},{cn:"Yugoslavia",pcc:"381",cc:"YU"},{cn:"Zambia",pcc:"260",cc:"ZM"},{cn:"Zimbabwe",pcc:"263",cc:"ZW"}],countryModelSelected:{pcc:"234",cc:"NG"},countryModelSelected_set:function(countryModelSelected){this.countryModelSelected=countryModelSelected;this.countryModelSelected_put()},countryModelSelected_put:function(){lhx.storageUtils.setObject(lhx.storageUtils.countryModelSelected,this.countryModelSelected)},countryModelSelected_init:function(){var countryModelSelected=lhx.storageUtils.getObject(lhx.storageUtils.countryModelSelected);if(countryModelSelected){this.countryModelSelected=countryModelSelected}else{this.countryModelSelected={pcc:"234",cc:"NG"}}this.initSelected();return this.countryModelSelected},findItemWithPcc:function(){var countryJSON=this.countryJSON;for(var i=0,item;(item=countryJSON[i++]);){var pcc=item.pcc;if(pcc===this.countryModelSelected){return item}}return{pcc:"234",cc:"NG"}},initSelected:function(){var $countryModel=$(".countryModel");var selectObj=this.countryModelSelected;var $countryModel_open=$countryModel.find(".countryModel_open");if($countryModel.attr("data-type")!=="1"&&$countryModel.attr("data-hasPlus")==="T"){var text="+"+selectObj.pcc;if($countryModel.attr("data-join")==="T"){text=selectObj.cc+" "+text;$countryModel_open.html(text).removeClass("placeholder");$countryModel.find(".countryModel_val").val(selectObj.pcc)}}},isOpen:false,init:function($this){var $countryModel=$this.parents(".countryModel");if($countryModel.hasClass("current")){this.close($countryModel);return}this.isOpen=true;$countryModel.addClass("current");if($countryModel.attr("data-isInit")==="T"){return}$countryModel.attr("data-isInit","T");if($countryModel.attr("data-type")==="1"){this.createPopIsName($countryModel);return}this.createPop($countryModel)},close:function($countryModel){this.isOpen=false;$countryModel.removeClass("current");var callback=$countryModel.attr("data-callback");try{eval(callback)($countryModel)}catch(e){}},createHot:function(){var html='<li class="head" data-value="Hot">Hot</li>';var hotCountryJson=this.hotCountryJson;for(var i=0,item;(item=hotCountryJson[i++]);){var pcc=item.pcc;var cc=item.cc;var cn=item.cn;html+='<li data-cc="'+cc+'"  data-value="'+pcc+'"><strong>'+cn+"</strong><span>+"+pcc+"</span></li>"}return html},createHotIsName:function(){var html='<li class="head" data-value="Hot">Hot</li>';var hotCountryJson=this.hotCountryJson;for(var i=0,item;(item=hotCountryJson[i++]);){var cc=item.cc;var cn=item.cn;html+='<li data-value="'+cc+'"><strong>'+cn+"</strong></li>"}return html},createPop:function($countryModel){var $countryPop_content=$countryModel.find(".countryPop_content");var html=this.createHot();var navHtml="<li>Hot</li>";var countryJSON=this.countryJSON;var firstName="Hot";for(var i=0,item;(item=countryJSON[i++]);){var pcc=item.pcc;var cc=item.cc;var cn=item.cn;if(firstName!==cn.charAt(0)){firstName=cn.charAt(0);html+='<li class="head" data-value="'+firstName+'">'+firstName+"</li>";navHtml+="<li>"+firstName+"</li>"}html+='<li data-cc="'+cc+'" data-value="'+pcc+'"><strong>'+cn+"</strong><span>+"+pcc+"</span></li>"}$countryPop_content.html(html);$countryModel.find(".countryPop_nav").html(navHtml)},createPopIsName:function($countryModel){var $countryPop_content=$countryModel.find(".countryPop_content");var html=this.createHotIsName();var navHtml="<li>Hot</li>";var countryJSON=this.countryJSON;var firstName="Hot";for(var i=0,item;(item=countryJSON[i++]);){var cc=item.cc;var cn=item.cn;if(firstName!==cn.charAt(0)){firstName=cn.charAt(0);html+='<li class="head" data-value="'+firstName+'">'+firstName+"</li>";navHtml+="<li>"+firstName+"</li>"}html+='<li data-value="'+cc+'"><strong>'+cn+"</strong></li>"}$countryPop_content.html(html);$countryModel.find(".countryPop_nav").html(navHtml)},navTo:function($this){var firstName=$this.text();var $countryModel=$this.parents(".countryModel");var $countryPop=$countryModel.find(".countryPop");var $heads=$countryModel.find(".countryPop_content li.head");for(var i=0,len=$heads.length;i<len;i++){var $head=$heads.eq(i);if(firstName===$head.attr("data-value")){$countryPop.animate({scrollTop:$countryPop.scrollTop()+$head.position().top+"px"},300);break}}},select:function($this){var $countryModel=$this.parents(".countryModel");var $countryModel_open=$countryModel.find(".countryModel_open");var $countryModel_val=$countryModel.find(".countryModel_val");var text="";var val=$this.attr("data-value");if($countryModel.attr("data-type")==="1"){text=$this.find("strong").html();$countryModel_open.html(text).removeClass("placeholder");if($countryModel.attr("data-fullName")==="T"){val=text}}else{if($countryModel.attr("data-hasPlus")==="T"){text="+"+val;if($countryModel.attr("data-join")==="T"){var cc=$this.attr("data-cc");text=cc+" "+text;this.countryModelSelected_set({pcc:val,cc:cc})}$countryModel_open.html(text).removeClass("placeholder")}else{$countryModel_open.html(val).removeClass("placeholder")}}$countryModel_val.val(val);this.close($countryModel)}};$(document).on({click:function(){var $this=$(this);countryModel.init($this)}},".countryModel_open");$(document).on({click:function(){countryModel.navTo($(this))}},".countryPop_nav li");$(document).on({click:function(){countryModel.select($(this))}},".countryPop_content li:not(.head)")}());lhx.eyes={initAll:function(){$(".eyes").addClass("eyesClosed");$(".password").attr("type","password")},toggle:function(b){var a=b.siblings(".password");if(b.hasClass("eyesClosed")){b.removeClass("eyesClosed");a.attr("type","text")}else{b.addClass("eyesClosed");a.attr("type","password")}}};$(document).on({click:function(){lhx.eyes.toggle($(this))}},".eyes");lhx.analog={radio:{init:function(){var b=$("input[type=radio]");var a=$("input[type=radio]:checked");b.parents(".radio").removeClass("checked");a.parents(".radio").addClass("checked")},change:function(c){var a=c.attr("data-name");var d=$("input[name="+a+"]");var b=$("input[name="+a+"]:checked");d.parents(".radio").removeClass("checked");b.parents(".radio").addClass("checked")}},checkbox:{init:function(){var b=$("input[type=checkbox]");var a=$("input[type=checkbox]:checked");b.parents(".checkbox").removeClass("checked");a.parents(".checkbox").addClass("checked")},change:function(a){var b=a.find("input[type=checkbox]");if(b.prop("checked")){b.parents(".checkbox").addClass("checked")}else{b.parents(".checkbox").removeClass("checked")}}}};$(document).on({click:function(){var a=$(this);lhx.analog.radio.change(a)}},".radio");$(document).on({click:function(){var a=$(this);lhx.analog.checkbox.change(a)}},".checkbox");$(document).on({input:function(d){var c=$(d.target);var b=c.attr("data-pattern");if(b){var a=c.attr("data-flags")||"";c.val(c.val().replace(new RegExp(b,a),""))}}});lhx.pop_switch={change:function(b){$(".pop_logInSignUp .pop_switch").fadeIn(0);$(".pop_logInSignUp .findPassword_title").fadeOut(0);var a=$(".pop_logInSignUp .pop_switch button").index(b);b.addClass("current").siblings("button").removeClass("current");$(".pop_logInSignUp form").removeClass("current").eq(a).addClass("current");lhx.setFBJs()}};$(document).on({click:function(){lhx.pop_switch.change($(this))}},".pop_logInSignUp .pop_switch button");lhx.login={isLogin:function(){return lhx.getCookie("sessionID")},isVip:function(){return lhx.getCookie("isVip")==="T"},isLoginUI:function(){return !!$(".userInfo .login_info").length},isAutoLogin:function(){return lhx.getCookie("tmpPw")},loginOut:function(){$(".sidebar .userInfo").html('<div class="logout_info clearfix">    <button class="img default_user_icon logIn_event"></button>    <div class="text">        <strong>            <button class="logIn_event">Log in /</button>            <button class="signUp_event">&nbsp;Sign up</button>        </strong>    </div></div>');lhx.favouritesPage.clearFavorite();lhx.myPlaylists.clearMyPlaylists();lhx.dialog.toast.show(config.msg.loginLose)},autoLoginCan:function(){var c=lhx.getCookie("avatar");var b=lhx.getCookie("vipType");var e=lhx.getCookie("sex");var a="";if(c){a='style="background-image: url('+config.staticAddr+c+');"'}var f=decodeURIComponent(lhx.getCookie("userName").replace("+","%20"));if(!f){f=decodeURIComponent(lhx.getCookie("name").replace("+","%20"))}var d='<div class="autoLogin_info clearfix">    <div class="img default_user_icon '+(e==="F"?"female_icon":"")+'" >       <div class="imgReal" '+a+'>           <cite class="default_authentic_icon '+(b==="P"?"icon_personal":b==="O"?"icon_organization":"")+'       "></cite>       </div>    </div>    <div class="text">        <strong class="icon_vip '+(lhx.getCookie("isVip")==="T"?"isVip":"")+'        ">'+f+'</strong>    </div>    <div class="autoLoginWrap">        <button class="autoLogin_event" data-src="'+config.basePath+'/autoLogin">Auto Login</button>        <button class="login_bg logIn_event">Switch Account</button>    </div></div>';$(".sidebar .userInfo").html(d);lhx.favouritesPage.clearFavorite();lhx.myPlaylists.clearMyPlaylists()},open:function(){$(".pop_logInSignUp_mask,.pop_logInSignUp").addClass("show");lhx.pop_switch.change($(".pop_logInSignUp .pop_switch button").eq(0))},close:function(){$(".pop_logInSignUp_mask,.pop_logInSignUp").removeClass("show")},phoneLogin:function(e){var d=e.find("[name=phoneCountryCode]").val();var b=$.trim(e.find("[name=phone]").val());if(b.length<6||b.length>20){if(b.length===0){lhx.dialog.toast.show(config.error.phoneEmpty);return false}lhx.dialog.toast.show(config.error.phoneCorrect);return false}var c=e.find("[name=pw]").val();if(c.length<6||c.length>16){if(c.length===0){lhx.dialog.toast.show(config.error.pwEmpty);return false}lhx.dialog.toast.show(config.error.pwCorrect);return false}var a={phoneCountryCode:d,phone:b,pw:c};lhx.dialog.loading.show("Submitting...");$.ajax({type:"POST",url:e.attr("action"),dataType:"json",data:JSON.stringify(a),contentType:"application/json;charset=utf-8",success:function(f){if(f.code==="success"){try{lhx.favouritesPage.parse(f.favorite)}catch(g){console.log("CalmLuo: favourites同步失败")}try{lhx.myPlaylists.parse(f.myPlaylists)}catch(g){console.log("CalmLuo: myPlaylists同步失败")}setTimeout(function(){location.reload()},200)}else{lhx.dialog.toast.show(f.desc||"");lhx.dialog.loading.close()}},error:function(f){lhx.dialog.toast.show(config.error.network,true,true);lhx.dialog.loading.close()}})},autoLogin:function(b){var a={};lhx.dialog.loading.show("Loading...");$.ajax({type:"POST",url:b.attr("data-src")||config.basePath+"/autoLogin",dataType:"json",data:JSON.stringify(a),contentType:"application/json;charset=utf-8",success:function(c){if(c.code==="success"){try{lhx.favouritesPage.parse(c.favorite)}catch(d){console.log("CalmLuo: favourites同步失败")}try{lhx.myPlaylists.parse(c.myPlaylists)}catch(d){console.log("CalmLuo: myPlaylists同步失败")}setTimeout(function(){location.reload()},200)}else{lhx.dialog.toast.show(c.desc||"");lhx.dialog.loading.close()}},error:function(c){console.log(c);lhx.dialog.toast.show(config.error.network,true,true);lhx.dialog.loading.close()}})}};$(document).on({click:function(){lhx.login.open()}},".logIn_event");$(document).on({click:function(){lhx.login.close()}},".pop_logInSignUp .close");$(document).on({submit:function(){lhx.login.phoneLogin($(this));return false}},".logInForm");$(document).on({click:function(){var a=$(this);lhx.login.autoLogin(a)}},".autoLogin_event");$(document).on({click:function(){var a=$(this);lhx.dialog.loading.show("Log out...");$.ajax({type:"POST",url:a.attr("data-href"),dataType:"json",data:"",contentType:"application/json;charset=utf-8",success:function(b){if(b.code==="success"){try{lhx.favouritesPage.clearFavorite();lhx.myPlaylists.clearMyPlaylists();setTimeout(function(){location.reload()},200)}catch(c){location.reload()}}else{lhx.dialog.toast.show(b.desc||"");lhx.dialog.loading.close()}},error:function(b){console.log(b);lhx.dialog.toast.show(config.error.network,true,true);lhx.dialog.loading.close()}})}},".logout_event");lhx.signUp={open:function(){$(".pop_logInSignUp_mask,.pop_logInSignUp").addClass("show");lhx.pop_switch.change($(".pop_logInSignUp .pop_switch button").eq(1))},close:function(){$(".pop_logInSignUp_mask,.pop_logInSignUp").removeClass("show")},continueAnimal:function(){var a=Math.floor((new Date().getTime()-lhx.storageUtils.timestamp_signUp_get())/1000);if(a<60){this.verifyCode.startRun(60-a)}},verifyCode:{timeId:null,num:61,$getCode:null,startRun:function(a){clearTimeout(this.timeId);this.num=a||61;if(this.num>61||this.num<2){this.num=2}this.$getCode=$(".getCode");this.$getCode.addClass("disabled");this.animal()},animal:function(){var a=this;if(--this.num<=0){this.$getCode.text("Get Code");this.$getCode.removeClass("disabled");return}else{this.$getCode.text(this.num+" s")}this.timeId=setTimeout(function(){a.animal()},1000)},sendSuccess:function(a){lhx.storageUtils.timestamp_signUp_put();this.$getCode=a;this.startRun(60)}}};lhx.signUp.continueAnimal();$(document).on({click:function(){var e=$(this);if(e.hasClass("disabled")){return}var c=$(".signUpForm");var d=c.find("[name=phoneCountryCode]").val();var b=c.find("[name=phone]").val();if(b.length<6||b.length>20){if(b.length===0){lhx.dialog.toast.show(config.error.phoneEmpty);return false}lhx.dialog.toast.show(config.error.phoneCorrect);return false}var a={phoneCountryCode:d,phone:b};lhx.dialog.loading.show("Loading...");$.ajax({type:"POST",url:e.attr("data-href"),dataType:"json",data:JSON.stringify(a),contentType:"application/json;charset=utf-8",success:function(f){if(f.code==="success"){lhx.signUp.verifyCode.sendSuccess(e);lhx.dialog.toast.show(f.desc||"")}else{if(f.code==="2030"){lhx.dialog.recaptcha.show(function(){lhx.dialog.recaptcha.close()})}else{lhx.dialog.toast.show(f.desc||"")}}lhx.dialog.loading.close()},error:function(f){console.log(f);lhx.dialog.toast.show(config.error.network,true,true);lhx.dialog.loading.close()}})}},".signUpForm .getCode");$(document).on({submit:function(){var g=$(this);var h=g.find("[name=phoneCountryCode]").val();var d=$.trim(g.find("[name=phone]").val());if(d.length<6||d.length>20){if(d.length===0){lhx.dialog.toast.show(config.error.phoneEmpty);return false}lhx.dialog.toast.show(config.error.phoneCorrect);return false}var j=g.find("[name=verifyCode]").val();if(j.length!==6){if(j.length===0){lhx.dialog.toast.show(config.error.codeEmpty);return false}lhx.dialog.toast.show(config.error.codeCorrect);return false}var c=g.find("[name=username]").val();if(c.length===0){lhx.dialog.toast.show(config.error.usernameEmpty);return false}else{if(c.length>50){lhx.dialog.toast.show(config.error.usernameCorrect);return false}}var i=g.find("[name=pw]").val();if(i.length<6||i.length>16){if(i.length===0){lhx.dialog.toast.show(config.error.pwEmpty);return false}lhx.dialog.toast.show(config.error.pwCorrect);return false}var a=g.find("[name=rePw]").val();if(a.length===0){lhx.dialog.toast.show(config.error.pwReEmpty);return false}else{if(a!==i){lhx.dialog.toast.show(config.error.pwReCorrect);return false}}var e=g.find("[name=sex]:checked").val();var b=g.find("[name=accept]:checked").val();if(b!=="T"){lhx.dialog.toast.show(config.error.acceptEmpty);return false}var f={phoneCountryCode:h,phone:d,verifyCode:j,name:c,pw:i,sex:e};lhx.dialog.loading.show("Loading...");$.ajax({type:"POST",url:g.attr("action"),dataType:"json",data:JSON.stringify(f),contentType:"application/json;charset=utf-8",success:function(k){if(k.code==="success"){setTimeout(function(){location.reload()},200)}else{lhx.dialog.toast.show(k.desc||"");lhx.dialog.loading.close()}},error:function(k){console.log(k);lhx.dialog.toast.show(config.error.network,true,true);lhx.dialog.loading.close()}});return false}},".signUpForm");$(document).on({click:function(){lhx.signUp.open()}},".signUp_event");lhx.findPassword={open:function(){this.continueAnimal();$(".pop_logInSignUp_mask,.pop_logInSignUp").addClass("show");$(".pop_logInSignUp .pop_switch").fadeOut(0);$(".pop_logInSignUp .findPassword_title").fadeIn(0);$(".pop_logInSignUp form").removeClass("current");$(".findPasswordForm").addClass("current")},back:function(){lhx.pop_switch.change($(".pop_logInSignUp .pop_switch button").eq(0))},close:function(){$(".pop_logInSignUp_mask,.pop_logInSignUp").removeClass("show")},continueAnimal:function(){var a=Math.floor((new Date().getTime()-lhx.storageUtils.timestamp_findPassword_get())/1000);console.log(a);if(a<60){this.verifyCode.startRun(60-a)}},verifyCode:{timeId:null,num:61,$getCode:null,startRun:function(a){clearTimeout(this.timeId);this.num=a||61;if(this.num>61||this.num<2){this.num=2}this.$getCode=$(".findPasswordForm .getCode");this.$getCode.addClass("disabled");this.animal()},animal:function(){var a=this;if(--this.num<=0){this.$getCode.text("Get Code");this.$getCode.removeClass("disabled");return}else{this.$getCode.text(this.num+" s")}this.timeId=setTimeout(function(){a.animal()},1000)},sendSuccess:function(a){lhx.storageUtils.timestamp_findPassword_put();this.$getCode=a;this.startRun(60)}},getCode:function(e){var c=$(".findPasswordForm");var d=c.find("[name=phoneCountryCode]").val();var b=c.find("[name=phone]").val();if(b.length<6||b.length>20){if(b.length===0){lhx.dialog.toast.show(config.error.phoneEmpty);return false}lhx.dialog.toast.show(config.error.phoneCorrect);return false}var a={phoneCountryCode:d,phone:b};lhx.dialog.loading.show("Loading...");$.ajax({type:"POST",url:e.attr("data-href"),dataType:"json",data:JSON.stringify(a),contentType:"application/json;charset=utf-8",success:function(f){if(f.code==="success"){lhx.findPassword.verifyCode.sendSuccess(e);lhx.dialog.toast.show(f.desc||"")}else{if(f.code==="2030"){lhx.dialog.recaptcha.show(function(){lhx.dialog.recaptcha.close()})}else{lhx.dialog.toast.show(f.desc||"")}}lhx.dialog.loading.close()},error:function(f){console.log(f);lhx.dialog.toast.show(config.error.network,true,true);lhx.dialog.loading.close()}})}};$(document).on({click:function(){var a=$(this);if(a.hasClass("disabled")){return}lhx.findPassword.getCode(a)}},".findPasswordForm .getCode");$(document).on({submit:function(){var f=$(this);var e=f.find("[name=phoneCountryCode]").val();var b=$.trim(f.find("[name=phone]").val());if(b.length<6||b.length>20){if(b.length===0){lhx.dialog.toast.show(config.error.phoneEmpty);return false}lhx.dialog.toast.show(config.error.phoneCorrect);return false}var d=f.find("[name=verifyCode]").val();if(d.length!==6){if(d.length===0){lhx.dialog.toast.show(config.error.codeEmpty);return false}lhx.dialog.toast.show(config.error.codeCorrect);return false}var c=f.find("[name=pw]").val();if(c.length<6||c.length>16){if(c.length===0){lhx.dialog.toast.show(config.error.pwEmpty);return false}lhx.dialog.toast.show(config.error.pwCorrect);return false}var g=f.find("[name=rePw]").val();if(g.length===0){lhx.dialog.toast.show(config.error.pwReEmpty);return false}else{if(g!==c){lhx.dialog.toast.show(config.error.pwReCorrect);return false}}var a={phoneCountryCode:e,phone:b,verifyCode:d,newPw:c};lhx.dialog.loading.show("Loading...");$.ajax({type:"POST",url:f.attr("action"),dataType:"json",data:JSON.stringify(a),contentType:"application/json;charset=utf-8",success:function(h){if(h.code==="success"){lhx.findPassword.back();lhx.dialog.toast.show(h.desc||"")}else{lhx.dialog.toast.show(h.desc||"")}lhx.dialog.loading.close()},error:function(h){console.log(h);lhx.dialog.toast.show(config.error.network,true,true);lhx.dialog.loading.close()}});return false}},".findPasswordForm");$(document).on({click:function(){lhx.findPassword.open()}},".forgetPassword_event");$(document).on({click:function(){lhx.findPassword.back()}},".findPassword_title button");lhx.profileEdit={birthday:{$birthdayWrap:null,init:function(){var b=new Date();var d=this.$birthdayWrap=$(".birthdayWrap");var g=d.attr("data-minYear")||1900;var a=d.attr("data-maxYear")||b.getFullYear();var f={year:null,month:null,day:null};var c=$.trim($(".birthday").val());if(c){var e=c.split("-");f.year=parseInt(e[0]);f.month=parseInt(e[1]);f.day=parseInt(e[2])}this.createYear(g,a,f.year);this.createMonth(f.month);this.createDay(f.year,f.month,f.day)},createYear:function(f,a,d){var c='<option value="">Year</option>';for(var b=f;b<=a;b++){var e="";if(b===d){e="selected=selected"}c+="<option "+e+' value="'+b+'">'+b+"</option>"}this.$birthdayWrap.find(".birthday_year").html(c)},createMonth:function(d){var b='<option value="">Month</option>';for(var a=1;a<=12;a++){var c="";if(a===d){c="selected=selected"}b+="<option "+c+' value="'+a+'">'+a+"</option>"}this.$birthdayWrap.find(".birthday_month").html(b)},createDay:function(h,a,b){if(h&&a){var c=new Date(h,a,0);var j=c.getDate();b=b&&Math.min(b,j)}var d=1;var g=j||31;var f='<option value="">Date</option>';for(var e=d;e<=g;e++){var k="";if(e===b){k="selected=selected"}f+="<option "+k+' value="'+e+'">'+e+"</option>"}this.$birthdayWrap.find(".birthday_date").html(f)},change:function(){var a=parseInt(this.$birthdayWrap.find(".birthday_year").val());var c=parseInt(this.$birthdayWrap.find(".birthday_month").val());var b=parseInt(this.$birthdayWrap.find(".birthday_date").val());this.createDay(a,c,b)}},submit:function(h){var a=h.find("[name=name]").val();var f=h.find("[name=sex]:checked").val();var b=h.find(".countryModel_val").val();var c=h.find("[name=sign]").val();var d=h.find(".birthday_year").val();var e=h.find(".birthday_month").val();var j=h.find(".birthday_date").val();var i="";if(d&&e&&j){i=d+"-"+lhx.addZero(e)+"-"+lhx.addZero(j)}var g={name:a,sex:f,birthday:i,country:b,sign:c};lhx.dialog.loading.show("Loading...");$.ajax({type:"POST",url:h.attr("action"),dataType:"json",data:JSON.stringify(g),contentType:"application/json;charset=utf-8",success:function(k){lhx.dialog.loading.close();if(k.code==="success"){history.back()}else{lhx.dialog.toast.show(k.desc||"");if(k.code==="2005"){lhx.login.autoLoginCan()}}},error:function(k){console.log(k);lhx.dialog.toast.show(config.error.network,true,true);lhx.dialog.loading.close()}})}};$(document).on({change:function(){lhx.profileEdit.birthday.change()}},".birthday_year,.birthday_month");$(document).on({submit:function(){lhx.profileEdit.submit($(this));return false}},".profileForm");$(document).on({click:function(){lhx.dialog.confirm.show(config.msg.saveProfile,function(){},function(){history.back()},"Cancel","Yes")}},".profileForm .cancel");$(document).on({change:function(){var a=$(".uploadAvatarForm");var b=a[0];var c=new FormData(b);lhx.dialog.loading.show("Loading...");$.ajax({url:a.attr("action"),type:"POST",data:c,contentType:false,processData:false,success:function(d){lhx.dialog.loading.close();if(d.code==="success"){$(".changeAvatar").css({backgroundImage:"url('"+config.staticAddr+d.resultData.avatar+"')"})}lhx.dialog.toast.show(d.desc||config.error.network)},error:function(){lhx.dialog.toast.show(config.error.network);lhx.dialog.loading.close()}})}},".uploadAvatar_file");lhx.myPlaylists={newPlaylist:{open:function(){$(".pop_addANewPlaylist_mask,.pop_addANewPlaylist").addClass("show")},close:function(){$(".pop_addANewPlaylist_mask,.pop_addANewPlaylist").removeClass("show")},ajax:function(b){var e=$(".pop_addANewPlaylist form");var d=e.find("[name=title]");var f=d.val().trim();if(f.length===0){lhx.dialog.toast.show(config.error.titleEmpty);return false}var c=e.find("[name=isPrivate]:checked").val();var a={name:f,isPrivate:c,musics:lhx.myPlaylists.musics};lhx.dialog.loading.show("loading...");$.ajax({type:"POST",url:e.attr("action"),dataType:"json",data:JSON.stringify(a),contentType:"application/json;charset=utf-8",success:function(h){if(h.code==="success"){lhx.myPlaylists.newPlaylist.close();d.val("");lhx.dialog.toast.show(config.msg.newPlaylistsSucc,true,false);var j=location.href;if(j.indexOf("/myPlaylists")!==-1){lhx.pajax.pajaxTo(j)}else{if(j.indexOf("/addAPlaylist")!==-1){var g=config.basePath+"/myPlaylists";history.replaceState({href:g},"",g);lhx.pajax.getData(j)}}var i=h.info;lhx.myPlaylists.addOnePlaylist({colID:i.colID,localColID:i.localColID,name:a.name,smIconID:i.smIconID});lhx.myPlaylists.addToPlaylist.close()}else{lhx.dialog.toast.show(h.desc||"")}lhx.dialog.loading.close()},error:function(g){console.log(g);lhx.dialog.toast.show(config.error.network,true,true);lhx.dialog.loading.close()}})}},musics:[],addToPlaylist:{isCreate:false,open:function(){$(".pop_addToPlaylist_mask,.pop_addToPlaylist").addClass("show");if(this.isCreate){return}this.isCreate=true;lhx.myPlaylists.createPop()},close:function(){lhx.myPlaylists.musics=[];$(".pop_addToPlaylist_mask,.pop_addToPlaylist").removeClass("show")},ajax:function(b){var a=lhx.myPlaylists.getTwoId(b);a.musics=lhx.myPlaylists.musics;console.log(a);lhx.dialog.loading.show("loading...");$.ajax({type:"POST",url:config.basePath+"/addToPlaylists",dataType:"json",data:JSON.stringify(a),contentType:"application/json;charset=utf-8",success:function(d){if(d.code==="success"){lhx.dialog.toast.show(config.msg.addToMyPlaylistsSucc);lhx.myPlaylists.addToPlaylist.close();var c=d.smIconID;b.find(".img").css({backgroundImage:"url('"+config.staticAddr+c+"')"});lhx.myPlaylists.changeSmIconIDWithColID(a.colID,c)}else{lhx.dialog.toast.show(d.desc||"")}lhx.dialog.loading.close()},error:function(c){console.log(c);lhx.dialog.toast.show(config.error.network,true,true);lhx.dialog.loading.close()}})}},createPop:function(){var d='<li class="newPlaylist_event">    <div class="default icon_addANewPlaylist"></div>    <strong>Add New Playlist</strong></li>';var c=this.myPlaylists;for(var b=0,a=c.length;b<a;b++){var e=c[b];d+='<li data-colID="'+e.colID+'" data-localColID="'+e.localColID+'">    <div class="default default_playlist">        <div class="img" style="background-image: url('+config.staticAddr+e.smIconID+')"></div>    </div>    <strong>'+e.name+"</strong></li>"}$(".pop_addToPlaylist ul").html(d)},myPlaylists:[],clearMyPlaylists:function(){this.set([])},parse:function(e){var b=[];var f=e.cols;if(!f){console.log("未设置myPlaylists");return}for(var d=0,a=f.length;d<a;d++){var c=f[d];b.push({colID:c.colID,localColID:c.localColID,name:c.name,smIconID:c.smIconID})}this.myPlaylists=b;this.put()},changeSmIconIDWithColID:function(e,b){var d=this.myPlaylists;for(var c=0,a=d.length;c<a;c++){var f=d[c];if(f.colID==e){f.smIconID=b;this.put();return}}},removeWithColID:function(d){var c=this.myPlaylists;for(var b=0,a=c.length;b<a;b++){var e=c[b];if(e.colID==d){c.splice(b,1);this.put();this.createPop();return}}},addOnePlaylist:function(a){this.myPlaylists.unshift(a);this.put();lhx.myPlaylists.createPop()},getTwoId:function(a){return{localColID:a.attr("data-localColID"),colID:a.attr("data-colID")}},set:function(a){this.myPlaylists=a;this.put()},put:function(){lhx.storageUtils.setObject(lhx.storageUtils.myPlaylists,this.myPlaylists)},init:function(){var a=lhx.storageUtils.getObject(lhx.storageUtils.myPlaylists);if(a){this.myPlaylists=a}else{this.myPlaylists=[]}return this.myPlaylists},update:function(){$.ajax({type:"POST",url:"/updateMyPlaylists",dataType:"json",data:JSON.stringify({}),contentType:"application/json;charset=utf-8",success:function(a){try{lhx.myPlaylists.parse(a)}catch(b){console.log("CalmLuo: myPlaylists同步失败")}},error:function(a){}})}};$(document).on({click:function(){lhx.myPlaylists.newPlaylist.open()}},".newPlaylist_event");$(document).on({click:function(){lhx.myPlaylists.newPlaylist.close()}},".pop_addANewPlaylist .close");$(document).on({click:function(){lhx.myPlaylists.newPlaylist.ajax();return false}},".pop_addANewPlaylist .submit");$(document).on({click:function(e){e.stopPropagation();var g=$(this);if(!lhx.login.isLogin()){lhx.login.open();return}if(g.hasClass("btn_addToPlaylist")){var b=[];var f=$(".songsMenu .play_one");for(var c=0,a=Math.min(f.length,100);c<a;c++){var d=f.eq(c);b.push({musicID:parseInt(d.attr("data-id"))})}lhx.myPlaylists.musics=b}else{lhx.myPlaylists.musics=[{musicID:parseInt(g.attr("data-id"))}]}lhx.myPlaylists.addToPlaylist.open()}},".addPlaylist_event");$(document).on({click:function(){var a=$(this);lhx.myPlaylists.addToPlaylist.ajax(a)}},".pop_addToPlaylist ul li:not(.newPlaylist_event)");$(document).on({click:function(){lhx.myPlaylists.addToPlaylist.close()}},".pop_addToPlaylist .close");lhx.sliderNav={init:function(){},change:function(c){c.addClass("current").siblings("button").removeClass("current");var b=$(".sliderNav button").index(c);$(".sliderNav_content .sliderNav_item").eq(b).addClass("current").siblings(".sliderNav_item").removeClass("current");var a=c.attr("data-href");history.replaceState({href:a},"",a);if(c.parents(".sliderNav").hasClass("favorites_sliderNav")){pageJS.logVisit_favourites()}}};$(document).on({click:function(){lhx.sliderNav.change($(this))}},".sliderNav button");$(document).on({click:function(a){a.stopPropagation();a.preventDefault();var b=$(this);lhx.dialog.confirm.show(config.msg.deletePlaylists,function(){},function(){var c=lhx.myPlaylists.getTwoId(b);lhx.dialog.loading.show("loading...");$.ajax({type:"POST",url:b.attr("data-href"),dataType:"json",data:JSON.stringify(c),contentType:"application/json;charset=utf-8",success:function(f){if(f.code==="success"){lhx.dialog.toast.show(config.msg.deletePlaylistsSucc);lhx.myPlaylists.removeWithColID(c.colID);var e=b.parents(".display").eq(0);b.parents("li").remove();if(!e.find("li").length){var d='<div class="noData">   <div class="imgBg"></div>   <div class="text">You haven\'t created any playlists. Create your own playlists here.</div>   <button class="button newPlaylist_event">Add a Playlist</button></div>';e.html(d)}}else{lhx.dialog.toast.show(f.desc||"")}lhx.dialog.loading.close()},error:function(d){console.log(d);lhx.dialog.toast.show(config.error.network,true,true);lhx.dialog.loading.close()}})},"No","Yes")}},".deletePlaylist");lhx.favouritesPage={favorite:{musics:[],albums:[],playlists:[],artists:[],oldCount:{musics:0,albums:0,playlists:0,artists:0}},clearFavorite:function(){this.set({musics:[],albums:[],playlists:[],artists:[],oldCount:{musics:0,albums:0,playlists:0,artists:0}})},parse:function(a){this.parseMusics(a);this.parseCols(a);this.put()},parseMusics:function(e){var g=[];var b=e.musics;if(!b){console.log("未设置favorite");return}for(var c=0,a=b.length;c<a;c++){var f=b[c];var d={id:f.musicID};g.push(d)}this.favorite.musics=g;this.favorite.oldCount.musics=this.favorite.musics.length},parseCols:function(c){var h=[];var b=[];var g=[];var f=c.cols;if(!f){console.log("未设置favorite");return}for(var d=0,e=f.length;d<e;d++){var a=f[d];var j={id:a.colID};if(a.colType===1){h.push(j)}else{if(a.colType===2){g.push(j)}else{if(a.colType===5){b.push(j)}}}}this.favorite.playlists=h;this.favorite.artists=g;this.favorite.albums=b;this.favorite.oldCount.playlists=h.length;this.favorite.oldCount.artists=g.length;this.favorite.oldCount.albums=b.length},addItem:function(d){var c=parseInt(d.attr("data-itemID"));var e=parseInt(d.attr("data-itemType"));var b="musics";if(e===1){b="playlists"}else{if(e===2){b="artists"}else{if(e===5){b="albums"}}}var a=lhx.favouritesPage.favorite[b];a.unshift({id:c});this.put()},removeItem:function(f){var e=parseInt(f.attr("data-itemID"));var g=parseInt(f.attr("data-itemType"));var d="musics";if(g===1){d="playlists"}else{if(g===2){d="artists"}else{if(g===5){d="albums"}}}var b=lhx.favouritesPage.favorite[d];for(var c=0,a=b.length;c<a;c++){if(b[c].id===e){b.splice(c,1);this.put();return}}},set:function(a){this.favorite=a;this.put()},put:function(){lhx.storageUtils.setObject(lhx.storageUtils.favorite,this.favorite)},init:function(){var a=lhx.storageUtils.getObject(lhx.storageUtils.favorite);if(a){this.favorite=a}else{this.favorite={musics:[],albums:[],playlists:[],artists:[],oldCount:{musics:0,albums:0,playlists:0,artists:0}}}return this.favorite},initLoveStatus:function(){var d=$(".favorite_event:not(.audioOperation_favorite)");var b=parseInt(d.attr("data-itemID"));var c=parseInt(d.attr("data-itemType"));var a="musics";if(c===1){a="playlists"}else{if(c===2){a="artists"}else{if(c===5){a="albums"}}}this.isInFavourite(d,a,b)},isInFavourite:function(f,d,e){var b=lhx.favouritesPage.favorite[d];for(var c=0,a=b.length;c<a;c++){if(b[c].id==e){f.addClass("isLove");return}}f.removeClass("isLove")},getResultData:function(b){var a=b.attr("data-itemID");var c=b.attr("data-itemType");if(c==1||c==2||c==5){c="COL"}return{itemID:a,itemType:c}},love:function(c){var b=this;var a=this.getResultData(c);lhx.dialog.loading.show("loading...");$.ajax({type:"POST",url:c.attr("data-href")+"love",dataType:"json",data:JSON.stringify(a),contentType:"application/json;charset=utf-8",success:function(d){if(d.code==="success"){b.addItem(c);lhx.dialog.toast.show(config.msg.love,true);c.addClass("isLove");b.changeAllStatus_love(c,a.itemID);lhx.changeCount(c,true)}else{lhx.dialog.toast.show(d.desc||"")}lhx.dialog.loading.close()},error:function(d){console.log(d);lhx.dialog.toast.show(config.error.network,true,true);lhx.dialog.loading.close()}})},isNoData:function(){var a="";var b=$(".sliderNav_item").eq(0);if(this.favorite.musics.length===0){a='<div class="noData">    <div class="imgBg"></div>    <div class="text">'+config.msg.favouritesNoSong+'</div>    <a class="button" href="/home">'+config.msg.discover+"</a></div>";b.html(a)}},changeAllStatus_love:function(b,a){var c=location.href;if(b.hasClass("audioOperation_favorite")){if(c.indexOf("/favourites")!==-1){lhx.pajax.pajaxTo(c)}else{$(".isSongPage.favorite_event[data-itemID="+a+"]").addClass("isLove")}}else{if(b.hasClass("isSongPage")){$(".audioOperation_favorite[data-itemID="+a+"]").addClass("isLove")}}},changeAllStatus_unlove:function(c,b,a){if(a){c.parents(".unloveByDeleteWrap").remove();this.isNoData();$(".audioOperation_favorite.isLove[data-itemID="+b+"]").removeClass("isLove")}else{if(c.hasClass("audioOperation_favorite")){var d=location.href;if(d.indexOf("/favourites")!==-1){$(".unloveByDeleteWrap[data-id="+b+"]").remove();this.isNoData()}else{if(d.indexOf("/songs/")!==-1){$(".dataAction .favorite_event[data-itemID="+b+"]").removeClass("isLove")}}}else{if(c.hasClass("isSongPage")){$(".audioOperation_favorite[data-itemID="+b+"]").removeClass("isLove")}}}},unlove:function(d,c){var b=this;var a=this.getResultData(d);lhx.dialog.loading.show("loading...");$.ajax({type:"POST",url:d.attr("data-href")+"unlove",dataType:"json",data:JSON.stringify(a),contentType:"application/json;charset=utf-8",success:function(e){if(e.code==="success"){b.removeItem(d);lhx.dialog.toast.show(config.msg.unlove);d.removeClass("isLove");b.changeAllStatus_unlove(d,a.itemID,c);lhx.changeCount(d,false)}else{lhx.dialog.toast.show(e.desc||"")}lhx.dialog.loading.close()},error:function(e){console.log(e);lhx.dialog.toast.show(config.error.network,true,true);lhx.dialog.loading.close()}})},update:function(){$.ajax({type:"POST",url:"/updateFavorite",dataType:"json",data:JSON.stringify({}),contentType:"application/json;charset=utf-8",success:function(a){try{lhx.favouritesPage.parse(a)}catch(b){console.log("CalmLuo: favourites同步失败")}},error:function(a){}})}};$(document).on({click:function(a){a.stopPropagation();var b=$(this);if(!lhx.login.isLogin()){lhx.login.open();return}if(b.hasClass("isLove")){lhx.favouritesPage.unlove(b)}else{lhx.favouritesPage.love(b)}}},".favorite_event");$(document).on({click:function(a){a.stopPropagation();var b=$(this);if(!lhx.login.isLogin()){lhx.login.open();return}lhx.favouritesPage.unlove(b,true)}},".unloveByDelete_event");lhx.search={timeId:null,searchAjax:null,searchAbort:function(){this.searchAjax&&this.searchAjax.abort()},cache:{maxLength:10,keyArr:[],dataArr:[],set:function(a,b){this.keyArr.unshift(a);this.dataArr.unshift(b);this.keyArr.length=Math.min(this.keyArr.length,this.maxLength);this.dataArr.length=Math.min(this.dataArr.length,this.maxLength)},get:function(b){var a=this.keyArr.indexOf(b);if(a===-1){return null}return this.dataArr[a]}},isClick:false,input:function(c){var a=this;var d=$.trim(c.val());a.searchAbort();clearTimeout(this.timeId);if(d===""){$(".search_event").removeClass("hasValue");$(".searchPop ol").html("");return}$(".search_event").addClass("hasValue");var b=this.cache.get(d);if(b){this.update(d,b,true);return}this.timeId=setTimeout(function(){a.ajax(d,c)},200)},update:function(f,e,b){var a=e.length;var d="";for(var c=0;c<a;c++){d+="<li><cite>"+(c+1)+'</cite><strong data-itemType="'+e[c].itemType+'">'+e[c].item+"</strong></li>"}if(!d){d=""}else{if(!b){this.cache.set(f,e)}}$(".searchPop ol").html(d)},ajax:function(d,c){var b=this;var a={content:d};this.searchAjax=$.ajax({type:"POST",url:c.attr("data-src"),dataType:"json",data:JSON.stringify(a),contentType:"application/json;charset=utf-8",success:function(e){if(e.code==="success"){b.update(d,e.info.keywords)}else{lhx.dialog.toast.show(e.desc||"")}},error:function(e){console.log(e)}})},searchTo:function(b){var a=$.trim(b.find("strong").text());var d=b.find("strong").attr("data-itemType");var c=$(".search_event").addClass("hasValue").val(a).attr("data-href")+d.toLowerCase()+"/"+encodeURIComponent(a);lhx.pajax.pajaxTo(c)},submit:function(){var a=$(".search_event");var b=$.trim(a.addClass("hasValue").val());if(b===""){lhx.dialog.toast.show(config.msg.searchEmpty);return}var c=a.attr("data-href")+"default/"+encodeURIComponent(b);lhx.pajax.pajaxTo(c)},init:function(){var a=decodeURIComponent(lhx.pajax.getLastUrl(location.pathname));$(".search_event").addClass("hasValue").val(a)},open:function(){lhx.search.isClick=false;$(".searchPop").addClass("show")},close:function(){$(".searchPop").removeClass("show")}};$(document).on({input:function(){lhx.search.input($(this))},focus:function(){lhx.search.input($(this));lhx.search.open()},blur:function(){if(lhx.search.isClick){return}lhx.search.close()},click:function(){lhx.logUtils.newLog("ACT","CLICK","SEARCH_CLICK")}},".search_event");$(document).on({submit:function(){lhx.search.submit($(this));$(".search_event").blur();return false}},".search");$(document).on({mousedown:function(){lhx.search.isClick=true;lhx.search.searchTo($(this));lhx.search.isClick=false;lhx.search.close()}},".searchPop ol li:not(.none)");$(document).on({click:function(){lhx.comment.face.toggle($(this))}},".openFace");$(document).on({click:function(a){var b=$(a.target);if(lhx.comment.face.isOpen&&!b.closest(".openFace").length&&!b.closest(".pop_face").length){lhx.comment.face.close()}if(lhx.contryModel.isOpen&&!b.closest(".countryModel").length){lhx.contryModel.close($(".countryModel"))}}});$(document).on({click:function(){lhx.comment.face.close()}},".pop_face .close");$(document).on({mouseup:function(){var c=$(this);var d=c.attr("data-imgSrc");var b=c.attr("data-value");var a='<img class="emoji" data-value="'+b+'" src="'+d+'" alt="Emoji - Boomplay" />';var e=c.parents(".createReplayWrap");lhx.comment.createComment.insert(e,a)},focus:function(){var a=$(this).parents(".createReplayWrap");lhx.comment.createComment.focus(a)}},".pop_face li button");$(document).on({click:function(){var b=$(this);var a=b.siblings(".createReplay_dynamic");$(".createReplay_dynamic").not(a).remove();if(a.length){if(a.hasClass("hidden")){a.removeClass("hidden").slideDown(300)}else{a.addClass("hidden").slideUp(300)}}else{lhx.comment.createReplay_dynamic(b)}}},".openReply");$(document).on({click:function(){var a=$(this);lhx.comment.submitComment(a)}},".submitComment");$(document).on({click:function(){lhx.comment.agreeOrDisagree($(this))}},".agree_event");lhx.embed={open:function(){lhx.share.close();var f=lhx.share[lhx.share.currentData];lhx.logUtils.clickLog(f,"byEB");var d=f.itemType;var b=f.itemID;var g=$(".pop_embed");if((d+b)===g.attr("data-only")){this.openUI();return}var i=g.find("iframe").eq(0);i.attr("src","about:blank");var h=420;var c="";if(d==="COL"){h=600}else{c="?colType="+f.colType+"&colID="+f.colID}var a=config.shareBaseUrl.embed+b+"/"+d+c;var e='<iframe src="'+a+'" width="100%" height="'+h+'" frameborder="0"></iframe>';g.attr("data-only",(d+b));g.find("textarea").val(e);g.find("strong").text("Embed:"+f.title);this.openUI();setTimeout(function(){i.attr("src",a.lmx_addURLParamBatch({setSession:"true"}))},200)},openUI:function(){$(".pop_embed,.pop_embed_mask").addClass("show")},close:function(){$(".pop_embed,.pop_embed_mask").removeClass("show")}};lhx.share={isOpen:false,open:function(a){if(a){$(".pop_share .embed").fadeOut(0)}else{$(".pop_share .embed").fadeIn(0)}$(".pop_share,.pop_share_mask").addClass("show");this.isOpen=true;lhx.setFBJs()},close:function(){$(".pop_share,.pop_share_mask").removeClass("show");this.isOpen=false},$this:null,currentData:"shareData_MUSIC",shareData_MUSIC:{content:"",itemID:"",itemType:"MUSIC",title:"",desc:config.msg.default_shareSong,pic:"",colType:"",colID:""},setSongWithData:function(b){if(!b){return}b=decodeURIComponent(b);var a=b.split("@+#");this.shareData_MUSIC={content:a[0],itemID:a[1],itemType:"MUSIC",title:a[2],desc:a[2]+" - Listen on Boomplay For Free",pic:a[4],colType:a[5],colID:a[6]};this.currentData="shareData_MUSIC"},setSongWithPlayOne:function(a){this.setSongWithSongMsg(lhx.audioUtils.parseMsg(a))},setSongWithSongMsg:function(a){lhx.share.shareData_MUSIC={content:config.shareBaseUrl.song+a.id,itemID:a.id,itemType:"MUSIC",title:a.name,desc:a.name+" - Listen on Boomplay For Free",pic:a.cover,colType:a.colType,colID:a.colID};lhx.share.currentData="shareData_MUSIC"},shareData_COL:{content:"",itemID:"",itemType:"COL",title:"",desc:config.msg.default_shareCOl,pic:""},setColWithData:function(b){if(!b){return}b=decodeURIComponent(b);var a=b.split("@+#");this.shareData_COL={content:a[0],itemID:a[1],itemType:"COL",title:a[2],desc:a[2]+" - Listen on Boomplay For Free",pic:a[4]};this.currentData="shareData_COL"},shareData_buzz:{content:"",itemID:"",itemType:"EXCLUSIVE",title:"",desc:config.msg.default_shareBuzz,pic:""},setBuzzWithData:function(b){if(!b){return}b=decodeURIComponent(b);var a=b.split("@+#");this.shareData_buzz={content:a[0],itemID:a[1],itemType:"EXCLUSIVE",title:a[2],desc:a[2]+" - Listen on Boomplay For Free",pic:a[4]};this.currentData="shareData_buzz"},toCopyLink:function(){var c=this;this.close();var a=this[this.currentData];var b=a.content;b=(b+"").lmx_addURLParamBatch({srModel:"COPYLINK",srList:"WEB"});c.copy(b,function(){c.close();lhx.dialog.toast.show("Copied.",true,false);lhx.logUtils.clickLog(a,"byCL")})},toTwitter:function(){this.close();var a=this[this.currentData];var d=a.content;var c="https://twitter.com/share?text="+encodeURIComponent(a.desc)+"&url="+encodeURIComponent(d.replace("https://","").lmx_addURLParamBatch({srModel:"TWITTER",srList:"WEB"}));var b=window.open(c,"bpToTwitter",lhx.openCenter(960,600));if(b.focus){b.focus()}lhx.logUtils.clickLog(a,"byTW",true)},toFacebook:function(){this.close();var a=this[this.currentData];var b=a.content;FB.ui({method:"feed",caption:"www.boomplay.com",name:a.title,description:a.desc,picture:a.pic,link:b.lmx_addURLParamBatch({srModel:"FACEBOOK",srList:"WEB"})},function(c){if(c){lhx.dialog.toast.show("Shared");lhx.logUtils.clickLog(a,"byFK",true)}})},copy:function(f,g){var d=document.getElementById("lmxCopy");if(!d){d=document.createElement("text");d.id="lmxCopy";d.style="position:absolute;left:-100px;top:-100px;height:100px;width:100px;overflow:auto;";document.body.appendChild(d)}d.innerText=f;var a=document.createRange();a.selectNode(d);var c=document.getSelection();c.selectAllChildren(d);try{var e=document.execCommand("copy",false,null);if(e){typeof g==="function"&&g()}}catch(b){}}};$(document).on({click:function(a){a.stopPropagation();var b=$(this);lhx.share.$this=b;switch(true){case b.hasClass("audioOperation_share"):if(lhx.audioUtils.songList.length){lhx.share.open();lhx.share.setSongWithSongMsg(lhx.audioUtils.currentMsg)}else{lhx.dialog.toast.show(config.error.playlistEmpty)}return;case b.hasClass("isSong"):lhx.share.open();lhx.share.setSongWithData(b.attr("data-data"));return;case b.hasClass("isPlayOne"):lhx.share.open();lhx.share.setSongWithPlayOne(b.parents(".play_one").attr("data-data"));return;case b.hasClass("isPlayOne_inSongList"):lhx.share.open();lhx.share.setSongWithPlayOne(lhx.audioUtils.songList[$(".songList li").index(b.parents("li"))]);return;case b.hasClass("isCol"):if(b.hasClass("noEmbed")){lhx.share.open(true)}else{lhx.share.open()}lhx.share.setColWithData(b.attr("data-data"));return;case b.hasClass("isBuzz"):lhx.share.open(true);lhx.share.setBuzzWithData(b.attr("data-data"));return;default:return}}},".share_event");$(document).on({click:function(){lhx.share.close()}},".pop_share .close");$(document).on({click:function(){lhx.share.toCopyLink()}},".pop_share .copyLink");$(document).on({click:function(){lhx.share.toFacebook()}},".pop_share .facebook");$(document).on({click:function(){lhx.share.toTwitter()}},".pop_share .twitter");$(document).on({click:function(){lhx.embed.open()}},".pop_share .embed");$(document).on({click:function(){lhx.embed.close()}},".pop_embed .close");$(document).on({click:function(){var a=$(".pop_embed .code").val();lhx.share.copy(a,function(){lhx.dialog.toast.show("copied.",true,false);lhx.embed.close()})}},".pop_embed .copy");$(document).on({click:function(){lhx.buzz.agreeOrDisagree($(this))}},".agree_event_buzz");$(window).on({resize:function(){lhx.readMore.init()}});$(document).on({click:function(){lhx.readMore.close()}},".pop_descriptionReadMore_mask");$(document).on({click:function(){lhx.readMore.close()}},".pop_descriptionReadMore .close");$(document).on({click:function(){lhx.readMore.open()}},".readMoreBtn");$(function(){lhx.versionControl();lhx.audioUtils.initPresetSongList();lhx.scrollChange();lhx.favouritesPage.init();lhx.myPlaylists.init();lhx.audioUtils.init();lhx.pajax.init();lhx.eyes.initAll();lhx.analog.radio.init();lhx.analog.checkbox.init();lhx.contryModel.countryModelSelected_init();lhx.profileEdit.birthday.init();lhx.storageUtils.initCookie()});function recaptchaOnload(b){try{if($("#recaptchaID").length){recaptchaOnload.recaptchaID=grecaptcha.render("recaptchaID",{sitekey:"6LcbWxAaAAAAAA0jPQq-VwrHd3PGOmm4LB6dCU0g",theme:"dark",callback:function(c){lhx.recaptchaCheck(c)},"expired-callback":function(){lhx.dialog.toast.show("Please try again!")},"error-callback":function(){lhx.dialog.toast.show("Network Error!")}})}}catch(a){}try{if($("#recaptchaID_dialog").length){recaptchaOnload.recaptchaID_dialog=grecaptcha.render("recaptchaID_dialog",{sitekey:"6LcbWxAaAAAAAA0jPQq-VwrHd3PGOmm4LB6dCU0g",theme:"dark",callback:function(c){lhx.recaptchaCheck(c,b)},"expired-callback":function(){lhx.dialog.toast.show("Please try again!")},"error-callback":function(){lhx.dialog.toast.show("Network Error!")}})}}catch(a){}}function recaptchaReset(){try{if(recaptchaOnload.recaptchaID!==undefined){grecaptcha.reset(recaptchaOnload.recaptchaID)}}catch(a){}try{if(recaptchaOnload.recaptchaID_dialog!==undefined){grecaptcha.reset(recaptchaOnload.recaptchaID_dialog)}}catch(a){}};